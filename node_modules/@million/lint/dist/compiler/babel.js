"use strict";var bt=Object.create;var W=Object.defineProperty;var Et=Object.getOwnPropertyDescriptor;var ht=Object.getOwnPropertyNames;var Tt=Object.getPrototypeOf,Pt=Object.prototype.hasOwnProperty;var Nt=(e,t)=>{for(var r in t)W(e,r,{get:t[r],enumerable:!0})},ge=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ht(t))!Pt.call(e,o)&&o!==r&&W(e,o,{get:()=>t[o],enumerable:!(n=Et(t,o))||n.enumerable});return e};var S=(e,t,r)=>(r=e!=null?bt(Tt(e)):{},ge(t||!e||!e.__esModule?W(r,"default",{value:e,enumerable:!0}):r,e)),Ct=e=>ge(W({},"__esModule",{value:!0}),e);var qt={};Nt(qt,{babel:()=>q,default:()=>Wt});module.exports=Ct(qt);var v=S(require("@babel/types"));var O=require("kleur/colors");var Ie=require("unplugin"),ve=require("@rollup/pluginutils"),we=require("@babel/core");var ye=d((e,t,r)=>{let n=new Set(r),o=-1,a=-1,i;for(let l=0,c=e.length;l<c;l+=1){let p=e[l];n.has(p.name)&&o===-1&&(o=l),p.name===t&&(a=l,i=p)}o!==-1&&a!==-1&&o<a&&(e.splice(a,1),e.splice(o,0,i))},"repushPlugin:plugin.ts"),te=d(e=>e.replace(process.cwd(),""),"getRelativePath:plugin.ts");var nr=require("isomorphic-fetch"),xe=process.cwd(),re=d(async e=>{try{let t=await he();for(let r=0,n=t.length;r<n;r++){let{port:o,cwd:a}=t[r];!e.includes(a)&&!xe.includes(a)||fetch(`http://localhost:${o}/reset`).catch(()=>null)}}catch{}},"reset:http.ts"),Se=d(async(e,t)=>{let r=[];for(let i in t){let l=t[i];for(let c=0,p=l.length;c<p;c++)r.push(l[c])}r.sort((i,l)=>l.size-i.size);let n=[];for(let i=0,l=r.length;i<l;i++){if(i<l*.25){n.push(r[i]);continue}break}let o={};for(let i=0,l=n.length;i<l;i++){let c=n[i];o[c.filename]||(o[c.filename]=[]),o[c.filename].push(c)}let a={};for(let i in t){let l=t[i];for(let c=0,p=l.length;c<p;c++)a[i]=l}try{await Ee(e,{bundle:{all:a,outliers:o}})}catch{}},"reportBundle:http.ts"),be=d(async(e,t)=>{try{await Ee(e,{stateManagers:t})}catch{}},"reportStateManagers:http.ts"),Ee=d(async(e,t)=>{try{let r=await he();for(let n=0,o=r.length;n<o;n++){let{port:a,cwd:i}=r[n];!e.includes(i)&&!xe.includes(i)||fetch(`http://localhost:${a}/ingest?t=${Object.keys(t).join(",")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(()=>null)}}catch{}},"report:http.ts"),he=d(async()=>(await fetch(`http://localhost:${52921}`)).json(),"getSync:http.ts");var R=require("kleur/colors");var Te=!1,Pe=()=>{if(Te)return;let e=performance.now();Te=!0,console.log(`
 ${(0,R.bold)((0,R.magenta)("\u26A1 Million Lint v0.0.66"))}`),console.log(` ${(0,R.green)("\u2713")} Ready in ${(performance.now()-e).toFixed(2)}ms`)},Ne=e=>(console.log(` ${(0,R.gray)("\u25CB")} Compiling ${te(e)} ...`),performance.now()),Ce=(e,t,r)=>{if(t===null)return 0;let n=performance.now()-t;return console.log(` ${(0,R.green)("\u2713")} Compiled ${te(e)} in ${n.toFixed(2)}ms (total: ${r.toFixed(2)}ms)`),n};var vt="**/*.{jsx,tsx,ts,js,mjs,cjs}",wt="**/node_modules/**/*",Me=!1,De=()=>Me,Mt=process.env.NODE_ENV==="production",dr=(0,Ie.createUnplugin)((e={},t)=>{var a,i;if(Mt)return{name:"anya"};Pe();let r=(0,ve.createFilter)(((a=e.filter)==null?void 0:a.include)||vt,((i=e.filter)==null?void 0:i.exclude)||[wt,"**/_app.{jsx,tsx,js,ts}","**/_document.{jsx,tsx,js,ts}"]),n=null,o=0;return Me=e.dev||!1,e.framework??(e.framework=t.framework),{enforce:"pre",name:"anya",watchChange(l){o=0,re(l)},transformInclude(l){let c=r(l);return c&&e.dev&&(n=Ne(l)),c},async transform(l,c){var p;try{let f=!0;if((c.endsWith(".ts")||c.endsWith(".mjs")||c.endsWith(".cjs"))&&(f=!1),c.endsWith(".js")&&!/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/.test(l)&&(f=!1),e.extra===!1&&!f)return null;let m=["jsx",["importAttributes",{deprecatedAssertSyntax:!1}],"throwExpressions","decorators","destructuringPrivate","explicitResourceManagement"];if(/\.[mc]?tsx?$/i.test(c)&&m.push("typescript"),(p=e.plugins)!=null&&p.length)for(let M=0,T=e.plugins.length;M<T;M++){let H=e.plugins[M];typeof H=="string"&&m.push(H)}let y=await(0,we.transformAsync)(l,{plugins:[[q,{...e,source:l,isJSX:f,filename:c,extra:!0}]],parserOpts:{plugins:m},filename:c,ast:!1,sourceFileName:c,sourceMaps:!0,configFile:!1,babelrc:!1});if(e.dev&&(o+=Ce(c,n,o)),y)return{code:y.code||"",map:y.map}}catch{}return null},vite:{handleHotUpdate(l){o=0,re(l.file)},configResolved(l){ye(l.plugins,"anya",["astro:jsx","vite:react-babel","vite:react-jsx","vite:preact-jsx","vite:react-swc"])}}}});var d=(e,t)=>(...r)=>{if(De()!=="debug")return e(...r);let o=performance.now(),a=e(...r),i=performance.now(),l=Number((i-o).toFixed(4));return l<.025||(l>.1?l=(0,O.red)(l):l>.05&&(l=(0,O.yellow)(l)),console.log(`   - ${l}ms ${(0,O.gray)(`| ${t}`)}`)),a};var Re=d(e=>{let t=e.node.directives;if(!t)return!1;let r=!1;for(let n=0,o=t.length;n<o;n++)if(t[n].value.value==="use client"){r=!0;break}return r},"hasUseClientDirective:check.ts"),oe=new Map,ne=d(e=>{var r;if(!e)return!1;if(oe.has(e))return oe.get(e);let t=!1;for(let n=0,o=((r=e.node.leadingComments)==null?void 0:r.length)||0;n<o;n++)if(e.node.leadingComments[n].value.includes("million ignore")){t=!0;break}return oe.set(e,t),t?!0:ne(e.parentPath)},"shouldIgnore:check.ts");var ae=require("@babel/helper-module-imports"),F=S(require("@babel/types"));var s=S(require("@babel/types"));var ie=d(e=>s.isTSParameterProperty(e)||s.isTSDeclareFunction(e)||s.isTSDeclareMethod(e)||s.isTSQualifiedName(e)||s.isTSCallSignatureDeclaration(e)||s.isTSConstructSignatureDeclaration(e)||s.isTSPropertySignature(e)||s.isTSMethodSignature(e)||s.isTSIndexSignature(e)||s.isTSAnyKeyword(e)||s.isTSBooleanKeyword(e)||s.isTSBigIntKeyword(e)||s.isTSIntrinsicKeyword(e)||s.isTSNeverKeyword(e)||s.isTSNullKeyword(e)||s.isTSNumberKeyword(e)||s.isTSObjectKeyword(e)||s.isTSStringKeyword(e)||s.isTSSymbolKeyword(e)||s.isTSUndefinedKeyword(e)||s.isTSUnknownKeyword(e)||s.isTSVoidKeyword(e)||s.isTSThisType(e)||s.isTSFunctionType(e)||s.isTSConstructorType(e)||s.isTSTypeReference(e)||s.isTSTypePredicate(e)||s.isTSTypeQuery(e)||s.isTSTypeLiteral(e)||s.isTSArrayType(e)||s.isTSTupleType(e)||s.isTSOptionalType(e)||s.isTSRestType(e)||s.isTSNamedTupleMember(e)||s.isTSUnionType(e)||s.isTSIntersectionType(e)||s.isTSConditionalType(e)||s.isTSInferType(e)||s.isTSParenthesizedType(e)||s.isTSTypeOperator(e)||s.isTSIndexedAccessType(e)||s.isTSMappedType(e)||s.isTSLiteralType(e)||s.isTSExpressionWithTypeArguments(e)||s.isTSInterfaceDeclaration(e)||s.isTSInterfaceBody(e)||s.isTSTypeAliasDeclaration(e)||s.isTSInstantiationExpression(e)||s.isTSAsExpression(e)||s.isTSSatisfiesExpression(e)||s.isTSTypeAssertion(e)||s.isTSEnumDeclaration(e)||s.isTSEnumMember(e)||s.isTSModuleDeclaration(e)||s.isTSModuleBlock(e)||s.isTSImportType(e)||s.isTSImportEqualsDeclaration(e)||s.isTSExternalModuleReference(e)||s.isTSNonNullExpression(e)||s.isTSExportAssignment(e)||s.isTSNamespaceExportDeclaration(e)||s.isTSTypeAnnotation(e)||s.isTSTypeParameterInstantiation(e)||s.isTSTypeParameterDeclaration(e)||s.isTSTypeParameter(e),"isTypeScript:mod.ts");var k=S(require("@babel/types"));var Dt=/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/,X=d(e=>{if(Dt.test(e.getSource()))return!0;let t=!1;return e.traverse({JSXElement(r){t=!0,r.stop()},JSXFragment(r){t=!0,r.stop()}}),t},"hasJSX:jsx.ts"),A=d(e=>!e.length||!/[a-zA-Z]/.test(e[0])?!1:e[0]===e[0].toUpperCase(),"isCapitalized:jsx.ts"),ke=d(e=>k.isJSXIdentifier(e)?k.identifier(e.name):k.isJSXMemberExpression(e)?k.memberExpression(ke(e.object),ke(e.property)):k.identifier(e.name.name),"convertJSXToAST:jsx.ts");var V=d(e=>Array.isArray(e)?e[0]:e,"resolvePath:path.ts"),Dr=d(e=>{let t=!1;return e.traverse({ReturnStatement(){t=!0}}),t},"hasReturnStatement:path.ts");var Ae=d((e,t)=>{let r=new Map,n={},o=(c,p)=>{let f=`${c}@${p}`;return r.has(f)||r.set(f,(0,ae.addNamed)(e,c,p)),r.get(f)},a=c=>{let p=`default@${c}`;return r.has(p)||r.set(p,(0,ae.addNamed)(e,"default",c,{nameHint:"_"})),r.get(p)},i=0;return{addNamed:o,addDefault:a,addExport:(c,p,f)=>{n[`export_${c??i++}`]={kind:"export",loc:[(p==null?void 0:p.start.line)||0,(p==null?void 0:p.start.column)||0,(p==null?void 0:p.end.line)||0,(p==null?void 0:p.end.column)||0],jsx:!!f}},importMap:r,externalsMap:n,options:t}},"createModuleFactory:mod.ts"),b=d((e,t,r)=>{let n=e.node.callee;if(F.isMemberExpression(n)){if(!F.isIdentifier(n.property))return!1;n=n.property}if(!F.isIdentifier(n))return!1;let o=e.scope.getBinding(n.name);if(!o||!o.path.isImportSpecifier()||!F.isIdentifier(o.path.node.imported))return!1;let a=t.indexOf(o.path.node.imported.name);return a===-1||!o.path.parentPath.isImportDeclaration()||o.path.parentPath.node.source.value!==r?!1:t[a]},"isImportFrom:mod.ts"),z=d((e,t)=>{var n;if((n=t==null?void 0:t.node)!=null&&n.loc||ie(t.node))return;let r=null;t.traverse({MemberExpression(o){F.isIdentifier(o.node.property)&&(r=o.node.property.name)},Identifier(o){r=o.node.name,o.stop()}}),e.addExport(r,t.node.loc,X(V(t.get("declaration"))))},"createESMExport:mod.ts"),Fe=d((e,t)=>{var n;if((n=t==null?void 0:t.node)!=null&&n.loc||ie(t.node)||!F.isIdentifier(t.node.property)||!F.isIdentifier(t.node.object)||t.node.object.name!=="module"||t.node.property.name!=="exports")return;let r=t.find(o=>o.isAssignmentExpression());r&&e.addExport(null,r.node.loc,X(V(r.get("right"))))},"createCJSExport:mod.ts"),se=new Map,Le=d((e,t)=>{let n=t.path.component.scope.getAllBindings();for(let o in n){let a=n[o];if(a&&o===t.name||a.scope.uid===t.path.real.scope.uid)continue;if(se.has(`${o}::${a.scope.uid}`)){e.externalsMap[o]=se.get(`${o}::${a.scope.uid}`);continue}let i=a.kind,l=a.path.node.loc;o==="arguments"||i==="param"||(e.externalsMap[o]={kind:i,loc:[(l==null?void 0:l.start.line)||0,(l==null?void 0:l.start.column)||0,(l==null?void 0:l.end.line)||0,(l==null?void 0:l.end.column)||0],jsx:X(a.path)},se.set(`${o}::${a.scope.uid}`,e.externalsMap[o]))}return e.externalsMap},"getExternals:mod.ts");var Q=S(require("@babel/types")),G=e=>Q.isJSXNamespacedName(e)?`${e.namespace.name}:${e.name.name}`:Q.isJSXMemberExpression(e)?`${G(e.object)}.${G(e.property)}`:e.name;var E=S(require("@babel/types"));var _=new Map,C=(e,t)=>{let r=`${e}::${t}`;return je(r)},je=d((e,t=0)=>{if(_.has(e))return _.get(e);let r=3735928559^t,n=1103547991^t;for(let a=0,i;a<e.length;a++)i=e.charCodeAt(a),r=Math.imul(r^i,2654435761),n=Math.imul(n^i,1597334677);r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909);let o=4294967296*(2097151&n)+(r>>>0);if(_.has(e)){if(_.get(e)!==o)return je(e,t+1)}else _.set(e,o);return o},"hash:hash.ts");var I=S(require("@babel/types"));var Rt=I.arrayExpression([I.numericLiteral(0),I.numericLiteral(0),I.numericLiteral(0),I.numericLiteral(0)]),h=d(e=>{if(!e)return Rt;let{start:t,end:r}=e;return I.arrayExpression([I.numericLiteral(t.line),I.numericLiteral(t.column),I.numericLiteral(r.line),I.numericLiteral(r.column)])},"getSourceLocation:loc.ts");var L=S(require("@babel/types"));var Ue=d(e=>{let t=null;if(e.isArrowFunctionExpression()||e.isFunctionExpression()){L.isBlockStatement(e.node.body)||(e.node.body=L.blockStatement([L.returnStatement(e.node.body)]));let l=!1,c=e.find(p=>(p.isObjectProperty()&&(l=!0),p.isVariableDeclarator()));if(!c||l)return null;t=c}else e.isFunctionDeclaration()&&(t=e);if(!t)return null;let r=null,n=null;if(e.isClassDeclaration()){let l=t.get("body.body").find(p=>p.isClassMethod({kind:"constructor"}));if(!l)return null;e=l;let c=l.node.params;for(let p=0,f=c.length;p<f;p++){let m=c[p];if(L.isIdentifier(m,{name:"props"})){r=m,n=y=>{c[p]=y};break}}}else if(e.isFunctionDeclaration()||e.isFunctionExpression()||e.isArrowFunctionExpression()){let l=e.node.params;r=l[0]||null,n=c=>{l[0]=c}}let o=t.node.id;if(!(L.isIdentifier(o)&&A(o.name)&&X(e)))return null;let i={name:String(o.name),props:r,setProps:n,path:{real:e,component:t},type:{real:e.type,component:t.type}};return e._hir=i,i},"createHir:hir.ts"),le=new Map,J=d(e=>{if(le.has(e))return le.get(e);let t=null;return e.find(r=>(t=r._hir,!!t)),t&&le.set(e,t),t},"getHir:hir.ts");var Z=d((e,t,r,n,o,a,i)=>{let l=J(r);if(!l)return;let c=e.addNamed(t,"@million/lint/runtime"),p=E.addComment(E.callExpression(c,[E.numericLiteral(C(n,l.name)),r.node,h(a??r.node.loc),E.numericLiteral(o),i?E.objectExpression([E.objectProperty(E.identifier("name"),E.stringLiteral(i.name)),E.objectProperty(E.identifier("loc"),h(i.loc))]):E.nullLiteral()]),"leading","million ignore"),[f]=r.replaceWith(p);f.skip(),r.skip()},"captureGeneric:generic.ts");var P=S(require("@babel/types"));var He=d((e,t,r,n)=>{var p;let o=t.path.component.scope.generateUidIdentifier("props"),a=t.props,i=e.addNamed("captureProps","@million/lint/runtime"),l=P.addComment(P.callExpression(i,[P.numericLiteral(C(r,t.name)),o,h(a.loc),P.numericLiteral(n)]),"leading","million ignore");t.path.real.node.body.body.unshift(P.variableDeclaration("let",[P.variableDeclarator(a,o)]),P.expressionStatement(l)),(p=t.setProps)==null||p.call(t,o)},"captureProps:props.ts");var x=S(require("@babel/types"));var Je=d((e,t)=>{let r=e.addNamed("registerFile","@million/lint/runtime");return x.callExpression(r,[x.stringLiteral(t),x.stringLiteral(process.cwd()),e.addDefault("react"),x.stringLiteral(e.options.framework||"")])},"registerFile:register.ts"),kt=x.memberExpression(x.identifier("JSON"),x.identifier("parse")),Oe=d((e,t,r,n)=>{let o=Le(e,t),a=JSON.stringify(o),i=e.addNamed("registerComponent","@million/lint/runtime");return x.callExpression(i,[x.stringLiteral(r),x.stringLiteral(t.name),x.numericLiteral(C(r,t.name)),x.identifier(t.name),x.callExpression(kt,[x.stringLiteral(a)]),h(t.path.real.isArrowFunctionExpression()?t.path.component.parentPath.node.loc:t.path.component.node.loc),x.numericLiteral(n)])},"registerComponent:register.ts"),uo=d((e,t,r,n)=>{let o=e.addNamed("registerStateManager","@million/lint/runtime");return x.callExpression(o,[x.stringLiteral(t),x.stringLiteral(r),x.arrayExpression(n.map(i=>x.objectExpression([x.objectProperty(x.identifier("type"),x.stringLiteral(i.type)),x.objectProperty(x.identifier("loc"),h(i.loc))])))])},"registerStateManager:register.ts");var w=S(require("@babel/types"));var ce=d((e,t,r,n)=>{let o=J(t);if(!o)return;let a=w.cloneNode(t.node),i=t.find(f=>f.isJSXExpressionContainer()),l=e.addNamed("captureJSX","@million/lint/runtime"),c=w.addComment(w.callExpression(l,[w.numericLiteral(C(r,o.name)),a,h(t.node.loc),h((i==null?void 0:i.node.loc)??t.node.loc),w.numericLiteral(n)]),"leading","million ignore"),[p]=t.replaceWith(t.parentPath.isJSXElement()||t.parentPath.isJSXFragment()?w.jsxExpressionContainer(c):c);p.skip()},"captureJSX:jsx.ts");var j=S(require("@babel/types"));var Xe=d((e,t,r)=>{let n=e.addNamed("useMount","@million/lint/runtime"),o=j.addComment(j.callExpression(n,[j.stringLiteral(r),j.stringLiteral(t.name)]),"leading","million ignore");t.path.real.node.body.body.unshift(j.expressionStatement(o))},"captureMount:mount.ts");var U=S(require("@babel/types"));var $e=d((e,t,r,n,o,a)=>{let i=J(r);if(!i)return;let l=e.addNamed(t,"@million/lint/runtime"),c=[];if(r.isArrayExpression()){let m=r.node.elements;for(let y=0,M=m.length;y<M;y++){let T=m[y];c.push(T==null?void 0:T.loc)}}let p=U.addComment(U.callExpression(l,[U.numericLiteral(C(n,i.name)),r.node,h(a??r.node.loc),U.arrayExpression(c.map(m=>h(m))),U.numericLiteral(o)]),"leading","million ignore"),[f]=r.replaceWith(p);f.skip(),r.skip()},"captureDeps:generic.ts");var N=S(require("@babel/types"));var Ve=d((e,t,r,n)=>{let o=J(t);if(!o)return;let a=e.addNamed("captureHTTP","@million/lint/runtime"),i=[];N.traverseFast(t.node,p=>{N.isStringLiteral(p)&&p.value.includes("/")&&i.push(p)});let l=N.addComment(N.callExpression(a,[N.numericLiteral(C(r,o.name)),t.node,h(t.node.loc),N.arrayExpression(i),N.numericLiteral(n)]),"leading","million ignore"),[c]=t.replaceWith(l);c.skip(),t.skip()},"captureHTTP:http.ts");var $=d((e,t,r,n)=>{if(t.scope.parent.uid!==r.scope.uid)return;if(t.isClass()){let c=t.node.superClass;if(!v.isMemberExpression(c))return;let p=c.object,f=c.property;if(!v.isIdentifier(p)||!v.isIdentifier(f)||p.name!=="React"||f.name!=="Component")return}let o=Ue(t);if(!o)return;Xe(e,o,n);let a=0;o.props&&(v.isObjectPattern(o.props)||v.isIdentifier(o.props))&&He(e,o,n,a++);let i=[];t.traverse({CallExpression(c){if(ne(c))return;let p=c.node.callee;if(v.isIdentifier(p)){if(["fetch","useQuery","useSWR"].includes(p.name)){Ve(e,c,n,a++);return}if(p.name.startsWith("use")){if(b(c,["useState","useReducer"],"react")||b(c,["useAtom"],"jotai")){Z(e,"captureReducer",c,n,a++);return}if(b(c,["useContext"],"react")||b(c,["useSelector"],"react-redux")||b(c,["useSnapshot"],"valtio")||b(c,["useRecoilState"],"recoil")||b(c,["useAtomValue"],"jotai")){Z(e,"captureFunctionCall",c,n,a++);return}if(b(c,["useEffect","useLayoutEffect","useMemo","useCallback","useInsertionEffect"],"react")&&c.node.arguments.length>1){let f=V(c.get("arguments.1"));if(!f.isExpression())return;$e(e,"captureDeps",f,n,a++,c.node.loc);return}}}v.isMemberExpression(p)&&v.isIdentifier(p.property)&&p.property.name==="setState"&&v.isIdentifier(p.object)&&p.object.name==="this"&&Z(e,"captureClassSetState",c,n,a)},JSXElement(c){let p=c.node,f=G(p.openingElement.name);if(A(f)){if(f.includes("Provider")){i.unshift(()=>{ce(e,c,n,a)});return}ce(e,c,n,a)}}});for(let c=0,p=i.length;c<p;c++)i[c]();return Oe(e,o,n,a+1)},"transformComponent:index.ts");var u=S(require("@babel/types"));var At=u.memberExpression(u.memberExpression(u.identifier("import"),u.identifier("meta")),u.identifier("hot")),Ft=u.memberExpression(u.memberExpression(u.identifier("import"),u.identifier("meta")),u.identifier("webpackHot")),ze=u.memberExpression(u.identifier("module"),u.identifier("hot")),Lt=u.binaryExpression("===",u.unaryExpression("typeof",u.identifier("module")),u.stringLiteral("undefined")),_e=d((e,t,r,n)=>{let o=e.options.framework==="webpack"?Ft:At,a=n.length,i=new Array(a);for(let T=0;T<a;T++)i[T]=u.expressionStatement(n[T]);let l=t.scope.generateUidIdentifier("c"),c=e.addNamed("resync","@million/lint/runtime"),p=e.addNamed("reportOutliers","@million/lint/runtime"),f=u.variableDeclaration("let",[u.variableDeclarator(l,u.arrowFunctionExpression([],u.blockStatement(i)))]),m=u.arrowFunctionExpression([],u.blockStatement([u.expressionStatement(u.callExpression(l,[])),u.expressionStatement(u.callExpression(c,[])),u.expressionStatement(u.callExpression(p,[]))])),y=u.ifStatement(ze,u.blockStatement([u.expressionStatement(u.callExpression(u.memberExpression(ze,u.identifier("accept")),[u.stringLiteral(r),m]))])),M=e.options.legacyHmr?y:u.ifStatement(Lt,u.blockStatement([u.ifStatement(o,u.blockStatement([u.expressionStatement(u.callExpression(u.memberExpression(o,u.identifier("accept")),[u.stringLiteral(r),m]))]))]),y);return jt([f,M,u.expressionStatement(u.callExpression(l,[]))])},"wrapHMR:hmr.ts"),jt=d(e=>u.expressionStatement(u.callExpression(u.arrowFunctionExpression([],u.blockStatement(e)),[])),"wrapIIFE:hmr.ts");var Be=S(require("@babel/types"));var Ke=d(e=>{let t=e.node.body,r=[];for(let n=0,o=t.length;n<o;n++){let a=t[n];if(!Be.isImportDeclaration(a))continue;let i=a.specifiers,l=a.source.value;if(!i.length)continue;let c=a.loc,p={specifiers:[],source:l,start:a.start,end:a.end,loc:[c.start.line,c.start.column,c.end.line,c.end.column]};r.push(p);for(let f=0,m=i.length;f<m;f++){let y=i[f];p.specifiers.push(y.local.name)}}return r},"getImports:debug");var Ye=require("fs"),et=require("module"),Y=S(require("path")),tt=require("util"),rt=S(require("zlib")),ot=S(require("esbuild"));var We=require("fs"),qe=require("module"),pe=S(require("path")),me=S(require("escalade")),B="package.json",ue=async e=>await(0,me.default)(e,(r,n)=>n.includes(B)?B:void 0)??void 0,Ut=async e=>{let t=await We.promises.readFile(e,"utf-8");return JSON.parse(t)},Ht=(e,t,r)=>(0,me.default)(e,async(n,o)=>{if(!o.includes(B))return;let a=pe.default.join(n,B),i=await Ut(a);return r==null||r(a,i),i.name===t?B:void 0}),Ge=async(e,t)=>{let n=(0,qe.createRequire)(pe.default.resolve(t,"<import>.js")).resolve(e),o=e.startsWith("@"),[a,i]=o?e.split("/"):[e.split("/")[0],""],l=a+(o?"/":"")+i,c,p;try{p=`${l}/package.json`,c=require(p)}catch{}let f,m;if(n!==l){let y=[];await Ht(n,l,(T,H)=>{y.push([T,H])})&&y.length>0&&([p,c]=y[y.length-1],y.length>1&&([m,f]=y[0]))}return{rootPackageFile:p,rootPackage:c,modulePackageFile:m,modulePackage:f}};var Jt=(0,tt.promisify)(rt.default.gzip),Ot=e=>Jt(e).then(t=>t.length),Qe=async e=>!!await Ye.promises.stat(e).catch(()=>null);var Xt=e=>[e&&`export {${Object.values({...e}).join(", ")}}`].filter(Boolean).join(`
`),fe=RegExp(`^node:|^(${et.builtinModules.join("|")})(/|$)`),$t={name:"external",setup(e){e.onResolve({filter:fe,namespace:"file"},t=>({path:t.path,external:!0}))}},Vt=/^[a-z@]/,zt={name:"external",setup(e){let t=new Map,r=new Map;e.onResolve({filter:Vt,namespace:"file"},async n=>{if(fe.test(n.path))return null;let o,a=n.resolveDir;if(t.has(a))o=await t.get(a);else{let i=ue(a).then(l=>l?require(l):null);t.set(a,i),o=await i}if(o!=null&&o.peerDependencies&&n.path in o.peerDependencies){let i=r.get(o.name);return i||(i=new Set,r.set(o.name,i)),i.add(n.path),{path:n.path,external:!0}}return null})}},Ze=new Map,_t=(e,t)=>`${e.name}:${e.version}:${t}`,Bt=async(e,t,{filename:r,baseDir:n,projectPackageFile:o,cache:a=!1})=>{let i=t.source,[l]=i.split("/");if(fe.test(l))throw new Error("Skip builtin modules");let c=`${e}
${Xt(t.specifiers)}`,{rootPackage:p}=await Ge(i,n).catch(()=>({})),f=a&&p!==void 0&&_t(p,c);if(a&&f){let D=Ze.get(f);if(D)return D}let m=p?Object.keys({...p.peerDependencies}):[],y=o?Y.default.dirname(o):n,M=await ot.build({stdin:{loader:"ts",contents:c,resolveDir:Y.default.dirname(r),sourcefile:"<import>"},outfile:"<bundle>.js",absWorkingDir:y,plugins:[$t,zt],resolveExtensions:[".jsx",".js",".tsx",".ts",".css",".json"],loader:{".node":"binary",".jpeg":"empty",".jpg":"empty",".png":"empty",".webp":"empty",".gif":"empty",".svg":"empty"},external:m,target:"esnext",format:"esm",platform:"browser",metafile:!1,minify:!0,bundle:!0,write:!1,logLimit:0,logLevel:"silent"}),T=await Promise.all(M.outputFiles.map(async D=>{let K=D.contents.length;return[K,K===0?0:await Ot(Buffer.from(D.contents))]})),H=0;for(let D=0,K=T.length;D<K;D++)H+=T[D][1];return a&&f&&Ze.set(f,H),H};async function*nt(e,t,r){let n=process.cwd(),o=t&&await Qe(t)?Y.default.dirname(t):n&&await Qe(n)?n:null;if(!o)return null;let a=await ue(o),i={filename:t,baseDir:o,projectPackageFile:a,cache:!0};for(let l=0,c=r.length;l<c;l++){let p=r[l],f=e.substring(p.start,p.end);try{let m=await Bt(f,p,i);m&&(yield m)}catch{}}}var Kt=async(e,t,r)=>{let n=[],o=0;for await(let a of nt(e,t,r)){let i=r[o];n.push({size:a,filename:t,loc:i.loc}),o++}return n},it={},st=async(e,t,r)=>{try{let n=await Kt(e,t,r);return it[t]=n,await Se(t,it),n}catch{}return[]};var at=S(require("@babel/types"));var lt=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!at.isIdentifier(n))return null;let o=b(t,["atom"],"jotai");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var ct=S(require("@babel/types"));var pt=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!ct.isIdentifier(n))return null;let o=b(t,["atom","selector"],"recoil");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var de=S(require("@babel/types"));var mt=(e,t)=>{let r=e.options.filename;if(t.isCallExpression()){let n=t.node.callee;if(!de.isIdentifier(n))return null;let o=b(t,["configureStore","createSlice","createReducer"],"@reduxjs/toolkit");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}}if(t.isFunctionDeclaration()||t.isVariableDeclarator()){let n=t.node.id;if(!de.isIdentifier(n))return null;if(n.name.toLowerCase().includes("reducer")){let o=t.node.loc;return{filename:r,type:"reducer",loc:[o.start.line,o.start.column,o.end.line,o.end.column]}}}return null};var ut=S(require("@babel/types"));var ft=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!ut.isIdentifier(n))return null;let o=b(t,["proxy"],"valtio");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var dt=S(require("@babel/types"));var gt=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!dt.isIdentifier(n))return null;let o=b(t,["create"],"zustand");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var yt=S(require("@babel/types"));var xt=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!yt.isIdentifier(n))return null;let o=b(t,["makeAutoObservable"],"mobx-react-lite");if(!o)return null;let a=t.find(l=>l.isClassDeclaration());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var ee=(e,t,r)=>{let{source:n}=e.options;if(n){if(n.includes("jotai")&&t.isCallExpression()){let o=lt(e,t);o&&(r.jotai??(r.jotai=[]),r.jotai.push(o))}if(n.includes("recoil")&&t.isCallExpression()){let o=pt(e,t);o&&(r.recoil??(r.recoil=[]),r.recoil.push(o))}if(n.includes("valtio")&&t.isCallExpression()){r.valtio??(r.valtio=[]);let o=ft(e,t);o&&(r.valtio??(r.valtio=[]),r.valtio.push(o))}if(n.includes("zustand")&&t.isCallExpression()){let o=gt(e,t);o&&(r.zustand??(r.zustand=[]),r.zustand.push(o))}if(n.includes("redux")&&(t.isCallExpression()||t.isVariableDeclarator()||t.isFunctionDeclaration())){r.redux??(r.redux=[]);let o=mt(e,t);o&&(r.redux??(r.redux=[]),r.redux.push(o))}if(n.includes("mobx")&&t.isCallExpression()){let o=xt(e,t);o&&(r.mobx??(r.mobx=[]),r.mobx.push(o))}}};var St=(e,t={})=>{let r=t.filename||"",n=[],o=()=>{var i;a||(a=!0,(i=n.shift())==null||i())},a=!1;return{name:"anya",visitor:{Program(i){let l=Ke(i),c=[],p={};if(t.rsc&&!Re(i))return;let f=Ae(i,t);if(c.push(Je(f,r)),i.traverse({CallExpression(m){t.extra&&ee(f,m,p)},ArrowFunctionExpression(m){if(!t.isJSX)return;let y=$(f,m,i,r);y&&c.push(y)},FunctionDeclaration(m){if(t.extra&&ee(f,m,p),!t.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let y=$(f,m,i,r);y&&c.push(y)},FunctionExpression(m){if(!t.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let y=$(f,m,i,r);y&&c.push(y)},VariableDeclarator(m){t.extra&&ee(f,m,p)},ClassDeclaration(m){if(t.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}$(f,m,i,r)}},ClassExpression(m){if(t.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}$(f,m,i,r)}},MemberExpression(m){t.isJSX&&Fe(f,m)},ExportAllDeclaration(m){t.isJSX&&z(f,m)},ExportDefaultDeclaration(m){t.isJSX&&z(f,m)},ExportNamedDeclaration(m){t.isJSX&&z(f,m)},ExportNamespaceSpecifier(m){t.isJSX&&z(f,m)}}),!!c.length){if(t.isJSX){let m=_e(f,i,r,c);i.node.body.push(m)}be(r,p),n.push(async()=>{await st(t.source,r,l),a=!1,o()}),o()}}}}};var q=St,Wt=q;0&&(module.exports={babel});
