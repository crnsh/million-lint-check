"use strict";var Lt=Object.create;var q=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var Ut=Object.getOwnPropertyNames;var Ht=Object.getPrototypeOf,Jt=Object.prototype.hasOwnProperty;var Ot=(e,t)=>{for(var r in t)q(e,r,{get:t[r],enumerable:!0})},xe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ut(t))!Jt.call(e,o)&&o!==r&&q(e,o,{get:()=>t[o],enumerable:!(n=jt(t,o))||n.enumerable});return e};var b=(e,t,r)=>(r=e!=null?Lt(Ht(e)):{},xe(t||!e||!e.__esModule?q(r,"default",{value:e,enumerable:!0}):r,e)),Xt=e=>xe(q({},"__esModule",{value:!0}),e);var xr={};Ot(xr,{babel:()=>Ft,default:()=>gr,esbuild:()=>Ct,next:()=>Rt,rollup:()=>Mt,rspack:()=>wt,unplugin:()=>At,vite:()=>kt,webpack:()=>Dt});module.exports=Xt(xr);var xt=require("unplugin"),yt=require("@rollup/pluginutils"),bt=require("@babel/core");var C=b(require("@babel/types"));var X=require("kleur/colors");var d=(e,t)=>(...r)=>{if(ye()!=="debug")return e(...r);let o=performance.now(),a=e(...r),i=performance.now(),l=Number((i-o).toFixed(4));return l<.025||(l>.1?l=(0,X.red)(l):l>.05&&(l=(0,X.yellow)(l)),console.log(`   - ${l}ms ${(0,X.gray)(`| ${t}`)}`)),a};var be=d(e=>{let t=e.node.directives;if(!t)return!1;let r=!1;for(let n=0,o=t.length;n<o;n++)if(t[n].value.value==="use client"){r=!0;break}return r},"hasUseClientDirective:check.ts"),re=new Map,oe=d(e=>{var r;if(!e)return!1;if(re.has(e))return re.get(e);let t=!1;for(let n=0,o=((r=e.node.leadingComments)==null?void 0:r.length)||0;n<o;n++)if(e.node.leadingComments[n].value.includes("million ignore")){t=!0;break}return re.set(e,t),t?!0:oe(e.parentPath)},"shouldIgnore:check.ts");var se=require("@babel/helper-module-imports"),F=b(require("@babel/types"));var s=b(require("@babel/types"));var ne=d(e=>s.isTSParameterProperty(e)||s.isTSDeclareFunction(e)||s.isTSDeclareMethod(e)||s.isTSQualifiedName(e)||s.isTSCallSignatureDeclaration(e)||s.isTSConstructSignatureDeclaration(e)||s.isTSPropertySignature(e)||s.isTSMethodSignature(e)||s.isTSIndexSignature(e)||s.isTSAnyKeyword(e)||s.isTSBooleanKeyword(e)||s.isTSBigIntKeyword(e)||s.isTSIntrinsicKeyword(e)||s.isTSNeverKeyword(e)||s.isTSNullKeyword(e)||s.isTSNumberKeyword(e)||s.isTSObjectKeyword(e)||s.isTSStringKeyword(e)||s.isTSSymbolKeyword(e)||s.isTSUndefinedKeyword(e)||s.isTSUnknownKeyword(e)||s.isTSVoidKeyword(e)||s.isTSThisType(e)||s.isTSFunctionType(e)||s.isTSConstructorType(e)||s.isTSTypeReference(e)||s.isTSTypePredicate(e)||s.isTSTypeQuery(e)||s.isTSTypeLiteral(e)||s.isTSArrayType(e)||s.isTSTupleType(e)||s.isTSOptionalType(e)||s.isTSRestType(e)||s.isTSNamedTupleMember(e)||s.isTSUnionType(e)||s.isTSIntersectionType(e)||s.isTSConditionalType(e)||s.isTSInferType(e)||s.isTSParenthesizedType(e)||s.isTSTypeOperator(e)||s.isTSIndexedAccessType(e)||s.isTSMappedType(e)||s.isTSLiteralType(e)||s.isTSExpressionWithTypeArguments(e)||s.isTSInterfaceDeclaration(e)||s.isTSInterfaceBody(e)||s.isTSTypeAliasDeclaration(e)||s.isTSInstantiationExpression(e)||s.isTSAsExpression(e)||s.isTSSatisfiesExpression(e)||s.isTSTypeAssertion(e)||s.isTSEnumDeclaration(e)||s.isTSEnumMember(e)||s.isTSModuleDeclaration(e)||s.isTSModuleBlock(e)||s.isTSImportType(e)||s.isTSImportEqualsDeclaration(e)||s.isTSExternalModuleReference(e)||s.isTSNonNullExpression(e)||s.isTSExportAssignment(e)||s.isTSNamespaceExportDeclaration(e)||s.isTSTypeAnnotation(e)||s.isTSTypeParameterInstantiation(e)||s.isTSTypeParameterDeclaration(e)||s.isTSTypeParameter(e),"isTypeScript:mod.ts");var R=b(require("@babel/types"));var _t=/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/,_=d(e=>{if(_t.test(e.getSource()))return!0;let t=!1;return e.traverse({JSXElement(r){t=!0,r.stop()},JSXFragment(r){t=!0,r.stop()}}),t},"hasJSX:jsx.ts"),A=d(e=>!e.length||!/[a-zA-Z]/.test(e[0])?!1:e[0]===e[0].toUpperCase(),"isCapitalized:jsx.ts"),Se=d(e=>R.isJSXIdentifier(e)?R.identifier(e.name):R.isJSXMemberExpression(e)?R.memberExpression(Se(e.object),Se(e.property)):R.identifier(e.name.name),"convertJSXToAST:jsx.ts");var V=d(e=>Array.isArray(e)?e[0]:e,"resolvePath:path.ts"),kr=d(e=>{let t=!1;return e.traverse({ReturnStatement(){t=!0}}),t},"hasReturnStatement:path.ts");var Ee=d((e,t)=>{let r=new Map,n={},o=(c,p)=>{let f=`${c}@${p}`;return r.has(f)||r.set(f,(0,se.addNamed)(e,c,p)),r.get(f)},a=c=>{let p=`default@${c}`;return r.has(p)||r.set(p,(0,se.addNamed)(e,"default",c,{nameHint:"_"})),r.get(p)},i=0;return{addNamed:o,addDefault:a,addExport:(c,p,f)=>{n[`export_${c??i++}`]={kind:"export",loc:[(p==null?void 0:p.start.line)||0,(p==null?void 0:p.start.column)||0,(p==null?void 0:p.end.line)||0,(p==null?void 0:p.end.column)||0],jsx:!!f}},importMap:r,externalsMap:n,options:t}},"createModuleFactory:mod.ts"),S=d((e,t,r)=>{let n=e.node.callee;if(F.isMemberExpression(n)){if(!F.isIdentifier(n.property))return!1;n=n.property}if(!F.isIdentifier(n))return!1;let o=e.scope.getBinding(n.name);if(!o||!o.path.isImportSpecifier()||!F.isIdentifier(o.path.node.imported))return!1;let a=t.indexOf(o.path.node.imported.name);return a===-1||!o.path.parentPath.isImportDeclaration()||o.path.parentPath.node.source.value!==r?!1:t[a]},"isImportFrom:mod.ts"),z=d((e,t)=>{var n;if((n=t==null?void 0:t.node)!=null&&n.loc||ne(t.node))return;let r=null;t.traverse({MemberExpression(o){F.isIdentifier(o.node.property)&&(r=o.node.property.name)},Identifier(o){r=o.node.name,o.stop()}}),e.addExport(r,t.node.loc,_(V(t.get("declaration"))))},"createESMExport:mod.ts"),he=d((e,t)=>{var n;if((n=t==null?void 0:t.node)!=null&&n.loc||ne(t.node)||!F.isIdentifier(t.node.property)||!F.isIdentifier(t.node.object)||t.node.object.name!=="module"||t.node.property.name!=="exports")return;let r=t.find(o=>o.isAssignmentExpression());r&&e.addExport(null,r.node.loc,_(V(r.get("right"))))},"createCJSExport:mod.ts"),ie=new Map,Te=d((e,t)=>{let n=t.path.component.scope.getAllBindings();for(let o in n){let a=n[o];if(a&&o===t.name||a.scope.uid===t.path.real.scope.uid)continue;if(ie.has(`${o}::${a.scope.uid}`)){e.externalsMap[o]=ie.get(`${o}::${a.scope.uid}`);continue}let i=a.kind,l=a.path.node.loc;o==="arguments"||i==="param"||(e.externalsMap[o]={kind:i,loc:[(l==null?void 0:l.start.line)||0,(l==null?void 0:l.start.column)||0,(l==null?void 0:l.end.line)||0,(l==null?void 0:l.end.column)||0],jsx:_(a.path)},ie.set(`${o}::${a.scope.uid}`,e.externalsMap[o]))}return e.externalsMap},"getExternals:mod.ts");var Q=b(require("@babel/types")),G=e=>Q.isJSXNamespacedName(e)?`${e.namespace.name}:${e.name.name}`:Q.isJSXMemberExpression(e)?`${G(e.object)}.${G(e.property)}`:e.name;var E=b(require("@babel/types"));var B=new Map,I=(e,t)=>{let r=`${e}::${t}`;return Pe(r)},Pe=d((e,t=0)=>{if(B.has(e))return B.get(e);let r=3735928559^t,n=1103547991^t;for(let a=0,i;a<e.length;a++)i=e.charCodeAt(a),r=Math.imul(r^i,2654435761),n=Math.imul(n^i,1597334677);r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909);let o=4294967296*(2097151&n)+(r>>>0);if(B.has(e)){if(B.get(e)!==o)return Pe(e,t+1)}else B.set(e,o);return o},"hash:hash.ts");var w=b(require("@babel/types"));var $t=w.arrayExpression([w.numericLiteral(0),w.numericLiteral(0),w.numericLiteral(0),w.numericLiteral(0)]),h=d(e=>{if(!e)return $t;let{start:t,end:r}=e;return w.arrayExpression([w.numericLiteral(t.line),w.numericLiteral(t.column),w.numericLiteral(r.line),w.numericLiteral(r.column)])},"getSourceLocation:loc.ts");var L=b(require("@babel/types"));var Ne=d(e=>{let t=null;if(e.isArrowFunctionExpression()||e.isFunctionExpression()){L.isBlockStatement(e.node.body)||(e.node.body=L.blockStatement([L.returnStatement(e.node.body)]));let l=!1,c=e.find(p=>(p.isObjectProperty()&&(l=!0),p.isVariableDeclarator()));if(!c||l)return null;t=c}else e.isFunctionDeclaration()&&(t=e);if(!t)return null;let r=null,n=null;if(e.isClassDeclaration()){let l=t.get("body.body").find(p=>p.isClassMethod({kind:"constructor"}));if(!l)return null;e=l;let c=l.node.params;for(let p=0,f=c.length;p<f;p++){let m=c[p];if(L.isIdentifier(m,{name:"props"})){r=m,n=x=>{c[p]=x};break}}}else if(e.isFunctionDeclaration()||e.isFunctionExpression()||e.isArrowFunctionExpression()){let l=e.node.params;r=l[0]||null,n=c=>{l[0]=c}}let o=t.node.id;if(!(L.isIdentifier(o)&&A(o.name)&&_(e)))return null;let i={name:String(o.name),props:r,setProps:n,path:{real:e,component:t},type:{real:e.type,component:t.type}};return e._hir=i,i},"createHir:hir.ts"),ae=new Map,O=d(e=>{if(ae.has(e))return ae.get(e);let t=null;return e.find(r=>(t=r._hir,!!t)),t&&ae.set(e,t),t},"getHir:hir.ts");var Z=d((e,t,r,n,o,a,i)=>{let l=O(r);if(!l)return;let c=e.addNamed(t,"@million/lint/runtime"),p=E.addComment(E.callExpression(c,[E.numericLiteral(I(n,l.name)),r.node,h(a??r.node.loc),E.numericLiteral(o),i?E.objectExpression([E.objectProperty(E.identifier("name"),E.stringLiteral(i.name)),E.objectProperty(E.identifier("loc"),h(i.loc))]):E.nullLiteral()]),"leading","million ignore"),[f]=r.replaceWith(p);f.skip(),r.skip()},"captureGeneric:generic.ts");var N=b(require("@babel/types"));var ve=d((e,t,r,n)=>{var p;let o=t.path.component.scope.generateUidIdentifier("props"),a=t.props,i=e.addNamed("captureProps","@million/lint/runtime"),l=N.addComment(N.callExpression(i,[N.numericLiteral(I(r,t.name)),o,h(a.loc),N.numericLiteral(n)]),"leading","million ignore");t.path.real.node.body.body.unshift(N.variableDeclaration("let",[N.variableDeclarator(a,o)]),N.expressionStatement(l)),(p=t.setProps)==null||p.call(t,o)},"captureProps:props.ts");var y=b(require("@babel/types"));var Ie=d((e,t)=>{let r=e.addNamed("registerFile","@million/lint/runtime");return y.callExpression(r,[y.stringLiteral(t),y.stringLiteral(process.cwd()),e.addDefault("react"),y.stringLiteral(e.options.framework||"")])},"registerFile:register.ts"),Vt=y.memberExpression(y.identifier("JSON"),y.identifier("parse")),we=d((e,t,r,n)=>{let o=Te(e,t),a=JSON.stringify(o),i=e.addNamed("registerComponent","@million/lint/runtime");return y.callExpression(i,[y.stringLiteral(r),y.stringLiteral(t.name),y.numericLiteral(I(r,t.name)),y.identifier(t.name),y.callExpression(Vt,[y.stringLiteral(a)]),h(t.path.real.isArrowFunctionExpression()?t.path.component.parentPath.node.loc:t.path.component.node.loc),y.numericLiteral(n)])},"registerComponent:register.ts"),fo=d((e,t,r,n)=>{let o=e.addNamed("registerStateManager","@million/lint/runtime");return y.callExpression(o,[y.stringLiteral(t),y.stringLiteral(r),y.arrayExpression(n.map(i=>y.objectExpression([y.objectProperty(y.identifier("type"),y.stringLiteral(i.type)),y.objectProperty(y.identifier("loc"),h(i.loc))])))])},"registerStateManager:register.ts");var M=b(require("@babel/types"));var le=d((e,t,r,n)=>{let o=O(t);if(!o)return;let a=M.cloneNode(t.node),i=t.find(f=>f.isJSXExpressionContainer()),l=e.addNamed("captureJSX","@million/lint/runtime"),c=M.addComment(M.callExpression(l,[M.numericLiteral(I(r,o.name)),a,h(t.node.loc),h((i==null?void 0:i.node.loc)??t.node.loc),M.numericLiteral(n)]),"leading","million ignore"),[p]=t.replaceWith(t.parentPath.isJSXElement()||t.parentPath.isJSXFragment()?M.jsxExpressionContainer(c):c);p.skip()},"captureJSX:jsx.ts");var j=b(require("@babel/types"));var Ce=d((e,t,r)=>{let n=e.addNamed("useMount","@million/lint/runtime"),o=j.addComment(j.callExpression(n,[j.stringLiteral(r),j.stringLiteral(t.name)]),"leading","million ignore");t.path.real.node.body.body.unshift(j.expressionStatement(o))},"captureMount:mount.ts");var U=b(require("@babel/types"));var Me=d((e,t,r,n,o,a)=>{let i=O(r);if(!i)return;let l=e.addNamed(t,"@million/lint/runtime"),c=[];if(r.isArrayExpression()){let m=r.node.elements;for(let x=0,D=m.length;x<D;x++){let T=m[x];c.push(T==null?void 0:T.loc)}}let p=U.addComment(U.callExpression(l,[U.numericLiteral(I(n,i.name)),r.node,h(a??r.node.loc),U.arrayExpression(c.map(m=>h(m))),U.numericLiteral(o)]),"leading","million ignore"),[f]=r.replaceWith(p);f.skip(),r.skip()},"captureDeps:generic.ts");var v=b(require("@babel/types"));var De=d((e,t,r,n)=>{let o=O(t);if(!o)return;let a=e.addNamed("captureHTTP","@million/lint/runtime"),i=[];v.traverseFast(t.node,p=>{v.isStringLiteral(p)&&p.value.includes("/")&&i.push(p)});let l=v.addComment(v.callExpression(a,[v.numericLiteral(I(r,o.name)),t.node,h(t.node.loc),v.arrayExpression(i),v.numericLiteral(n)]),"leading","million ignore"),[c]=t.replaceWith(l);c.skip(),t.skip()},"captureHTTP:http.ts");var $=d((e,t,r,n)=>{if(t.scope.parent.uid!==r.scope.uid)return;if(t.isClass()){let c=t.node.superClass;if(!C.isMemberExpression(c))return;let p=c.object,f=c.property;if(!C.isIdentifier(p)||!C.isIdentifier(f)||p.name!=="React"||f.name!=="Component")return}let o=Ne(t);if(!o)return;Ce(e,o,n);let a=0;o.props&&(C.isObjectPattern(o.props)||C.isIdentifier(o.props))&&ve(e,o,n,a++);let i=[];t.traverse({CallExpression(c){if(oe(c))return;let p=c.node.callee;if(C.isIdentifier(p)){if(["fetch","useQuery","useSWR"].includes(p.name)){De(e,c,n,a++);return}if(p.name.startsWith("use")){if(S(c,["useState","useReducer"],"react")||S(c,["useAtom"],"jotai")){Z(e,"captureReducer",c,n,a++);return}if(S(c,["useContext"],"react")||S(c,["useSelector"],"react-redux")||S(c,["useSnapshot"],"valtio")||S(c,["useRecoilState"],"recoil")||S(c,["useAtomValue"],"jotai")){Z(e,"captureFunctionCall",c,n,a++);return}if(S(c,["useEffect","useLayoutEffect","useMemo","useCallback","useInsertionEffect"],"react")&&c.node.arguments.length>1){let f=V(c.get("arguments.1"));if(!f.isExpression())return;Me(e,"captureDeps",f,n,a++,c.node.loc);return}}}C.isMemberExpression(p)&&C.isIdentifier(p.property)&&p.property.name==="setState"&&C.isIdentifier(p.object)&&p.object.name==="this"&&Z(e,"captureClassSetState",c,n,a)},JSXElement(c){let p=c.node,f=G(p.openingElement.name);if(A(f)){if(f.includes("Provider")){i.unshift(()=>{le(e,c,n,a)});return}le(e,c,n,a)}}});for(let c=0,p=i.length;c<p;c++)i[c]();return we(e,o,n,a+1)},"transformComponent:index.ts");var u=b(require("@babel/types"));var zt=u.memberExpression(u.memberExpression(u.identifier("import"),u.identifier("meta")),u.identifier("hot")),Bt=u.memberExpression(u.memberExpression(u.identifier("import"),u.identifier("meta")),u.identifier("webpackHot")),ke=u.memberExpression(u.identifier("module"),u.identifier("hot")),Kt=u.binaryExpression("===",u.unaryExpression("typeof",u.identifier("module")),u.stringLiteral("undefined")),Re=d((e,t,r,n)=>{let o=e.options.framework==="webpack"?Bt:zt,a=n.length,i=new Array(a);for(let T=0;T<a;T++)i[T]=u.expressionStatement(n[T]);let l=t.scope.generateUidIdentifier("c"),c=e.addNamed("resync","@million/lint/runtime"),p=e.addNamed("reportOutliers","@million/lint/runtime"),f=u.variableDeclaration("let",[u.variableDeclarator(l,u.arrowFunctionExpression([],u.blockStatement(i)))]),m=u.arrowFunctionExpression([],u.blockStatement([u.expressionStatement(u.callExpression(l,[])),u.expressionStatement(u.callExpression(c,[])),u.expressionStatement(u.callExpression(p,[]))])),x=u.ifStatement(ke,u.blockStatement([u.expressionStatement(u.callExpression(u.memberExpression(ke,u.identifier("accept")),[u.stringLiteral(r),m]))])),D=e.options.legacyHmr?x:u.ifStatement(Kt,u.blockStatement([u.ifStatement(o,u.blockStatement([u.expressionStatement(u.callExpression(u.memberExpression(o,u.identifier("accept")),[u.stringLiteral(r),m]))]))]),x);return Wt([f,D,u.expressionStatement(u.callExpression(l,[]))])},"wrapHMR:hmr.ts"),Wt=d(e=>u.expressionStatement(u.callExpression(u.arrowFunctionExpression([],u.blockStatement(e)),[])),"wrapIIFE:hmr.ts");var Ae=b(require("@babel/types"));var Fe=d(e=>{let t=e.node.body,r=[];for(let n=0,o=t.length;n<o;n++){let a=t[n];if(!Ae.isImportDeclaration(a))continue;let i=a.specifiers,l=a.source.value;if(!i.length)continue;let c=a.loc,p={specifiers:[],source:l,start:a.start,end:a.end,loc:[c.start.line,c.start.column,c.end.line,c.end.column]};r.push(p);for(let f=0,m=i.length;f<m;f++){let x=i[f];p.specifiers.push(x.local.name)}}return r},"getImports:debug");var mn=require("isomorphic-fetch"),Le=process.cwd(),ce=d(async e=>{try{let t=await Je();for(let r=0,n=t.length;r<n;r++){let{port:o,cwd:a}=t[r];!e.includes(a)&&!Le.includes(a)||fetch(`http://localhost:${o}/reset`).catch(()=>null)}}catch{}},"reset:http.ts"),je=d(async(e,t)=>{let r=[];for(let i in t){let l=t[i];for(let c=0,p=l.length;c<p;c++)r.push(l[c])}r.sort((i,l)=>l.size-i.size);let n=[];for(let i=0,l=r.length;i<l;i++){if(i<l*.25){n.push(r[i]);continue}break}let o={};for(let i=0,l=n.length;i<l;i++){let c=n[i];o[c.filename]||(o[c.filename]=[]),o[c.filename].push(c)}let a={};for(let i in t){let l=t[i];for(let c=0,p=l.length;c<p;c++)a[i]=l}try{await He(e,{bundle:{all:a,outliers:o}})}catch{}},"reportBundle:http.ts"),Ue=d(async(e,t)=>{try{await He(e,{stateManagers:t})}catch{}},"reportStateManagers:http.ts"),He=d(async(e,t)=>{try{let r=await Je();for(let n=0,o=r.length;n<o;n++){let{port:a,cwd:i}=r[n];!e.includes(i)&&!Le.includes(i)||fetch(`http://localhost:${a}/ingest?t=${Object.keys(t).join(",")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(()=>null)}}catch{}},"report:http.ts"),Je=d(async()=>(await fetch(`http://localhost:${52921}`)).json(),"getSync:http.ts");var ze=require("fs"),Be=require("module"),Y=b(require("path")),Ke=require("util"),We=b(require("zlib")),qe=b(require("esbuild"));var Oe=require("fs"),Xe=require("module"),pe=b(require("path")),me=b(require("escalade")),K="package.json",ue=async e=>await(0,me.default)(e,(r,n)=>n.includes(K)?K:void 0)??void 0,Gt=async e=>{let t=await Oe.promises.readFile(e,"utf-8");return JSON.parse(t)},Qt=(e,t,r)=>(0,me.default)(e,async(n,o)=>{if(!o.includes(K))return;let a=pe.default.join(n,K),i=await Gt(a);return r==null||r(a,i),i.name===t?K:void 0}),_e=async(e,t)=>{let n=(0,Xe.createRequire)(pe.default.resolve(t,"<import>.js")).resolve(e),o=e.startsWith("@"),[a,i]=o?e.split("/"):[e.split("/")[0],""],l=a+(o?"/":"")+i,c,p;try{p=`${l}/package.json`,c=require(p)}catch{}let f,m;if(n!==l){let x=[];await Qt(n,l,(T,J)=>{x.push([T,J])})&&x.length>0&&([p,c]=x[x.length-1],x.length>1&&([m,f]=x[0]))}return{rootPackageFile:p,rootPackage:c,modulePackageFile:m,modulePackage:f}};var Zt=(0,Ke.promisify)(We.default.gzip),Yt=e=>Zt(e).then(t=>t.length),$e=async e=>!!await ze.promises.stat(e).catch(()=>null);var er=e=>[e&&`export {${Object.values({...e}).join(", ")}}`].filter(Boolean).join(`
`),fe=RegExp(`^node:|^(${Be.builtinModules.join("|")})(/|$)`),tr={name:"external",setup(e){e.onResolve({filter:fe,namespace:"file"},t=>({path:t.path,external:!0}))}},rr=/^[a-z@]/,or={name:"external",setup(e){let t=new Map,r=new Map;e.onResolve({filter:rr,namespace:"file"},async n=>{if(fe.test(n.path))return null;let o,a=n.resolveDir;if(t.has(a))o=await t.get(a);else{let i=ue(a).then(l=>l?require(l):null);t.set(a,i),o=await i}if(o!=null&&o.peerDependencies&&n.path in o.peerDependencies){let i=r.get(o.name);return i||(i=new Set,r.set(o.name,i)),i.add(n.path),{path:n.path,external:!0}}return null})}},Ve=new Map,nr=(e,t)=>`${e.name}:${e.version}:${t}`,ir=async(e,t,{filename:r,baseDir:n,projectPackageFile:o,cache:a=!1})=>{let i=t.source,[l]=i.split("/");if(fe.test(l))throw new Error("Skip builtin modules");let c=`${e}
${er(t.specifiers)}`,{rootPackage:p}=await _e(i,n).catch(()=>({})),f=a&&p!==void 0&&nr(p,c);if(a&&f){let k=Ve.get(f);if(k)return k}let m=p?Object.keys({...p.peerDependencies}):[],x=o?Y.default.dirname(o):n,D=await qe.build({stdin:{loader:"ts",contents:c,resolveDir:Y.default.dirname(r),sourcefile:"<import>"},outfile:"<bundle>.js",absWorkingDir:x,plugins:[tr,or],resolveExtensions:[".jsx",".js",".tsx",".ts",".css",".json"],loader:{".node":"binary",".jpeg":"empty",".jpg":"empty",".png":"empty",".webp":"empty",".gif":"empty",".svg":"empty"},external:m,target:"esnext",format:"esm",platform:"browser",metafile:!1,minify:!0,bundle:!0,write:!1,logLimit:0,logLevel:"silent"}),T=await Promise.all(D.outputFiles.map(async k=>{let W=k.contents.length;return[W,W===0?0:await Yt(Buffer.from(k.contents))]})),J=0;for(let k=0,W=T.length;k<W;k++)J+=T[k][1];return a&&f&&Ve.set(f,J),J};async function*Ge(e,t,r){let n=process.cwd(),o=t&&await $e(t)?Y.default.dirname(t):n&&await $e(n)?n:null;if(!o)return null;let a=await ue(o),i={filename:t,baseDir:o,projectPackageFile:a,cache:!0};for(let l=0,c=r.length;l<c;l++){let p=r[l],f=e.substring(p.start,p.end);try{let m=await ir(f,p,i);m&&(yield m)}catch{}}}var sr=async(e,t,r)=>{let n=[],o=0;for await(let a of Ge(e,t,r)){let i=r[o];n.push({size:a,filename:t,loc:i.loc}),o++}return n},Qe={},Ze=async(e,t,r)=>{try{let n=await sr(e,t,r);return Qe[t]=n,await je(t,Qe),n}catch{}return[]};var Ye=b(require("@babel/types"));var et=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!Ye.isIdentifier(n))return null;let o=S(t,["atom"],"jotai");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var tt=b(require("@babel/types"));var rt=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!tt.isIdentifier(n))return null;let o=S(t,["atom","selector"],"recoil");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var de=b(require("@babel/types"));var ot=(e,t)=>{let r=e.options.filename;if(t.isCallExpression()){let n=t.node.callee;if(!de.isIdentifier(n))return null;let o=S(t,["configureStore","createSlice","createReducer"],"@reduxjs/toolkit");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}}if(t.isFunctionDeclaration()||t.isVariableDeclarator()){let n=t.node.id;if(!de.isIdentifier(n))return null;if(n.name.toLowerCase().includes("reducer")){let o=t.node.loc;return{filename:r,type:"reducer",loc:[o.start.line,o.start.column,o.end.line,o.end.column]}}}return null};var nt=b(require("@babel/types"));var it=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!nt.isIdentifier(n))return null;let o=S(t,["proxy"],"valtio");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var st=b(require("@babel/types"));var at=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!st.isIdentifier(n))return null;let o=S(t,["create"],"zustand");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var lt=b(require("@babel/types"));var ct=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!lt.isIdentifier(n))return null;let o=S(t,["makeAutoObservable"],"mobx-react-lite");if(!o)return null;let a=t.find(l=>l.isClassDeclaration());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var ee=(e,t,r)=>{let{source:n}=e.options;if(n){if(n.includes("jotai")&&t.isCallExpression()){let o=et(e,t);o&&(r.jotai??(r.jotai=[]),r.jotai.push(o))}if(n.includes("recoil")&&t.isCallExpression()){let o=rt(e,t);o&&(r.recoil??(r.recoil=[]),r.recoil.push(o))}if(n.includes("valtio")&&t.isCallExpression()){r.valtio??(r.valtio=[]);let o=it(e,t);o&&(r.valtio??(r.valtio=[]),r.valtio.push(o))}if(n.includes("zustand")&&t.isCallExpression()){let o=at(e,t);o&&(r.zustand??(r.zustand=[]),r.zustand.push(o))}if(n.includes("redux")&&(t.isCallExpression()||t.isVariableDeclarator()||t.isFunctionDeclaration())){r.redux??(r.redux=[]);let o=ot(e,t);o&&(r.redux??(r.redux=[]),r.redux.push(o))}if(n.includes("mobx")&&t.isCallExpression()){let o=ct(e,t);o&&(r.mobx??(r.mobx=[]),r.mobx.push(o))}}};var te=(e,t={})=>{let r=t.filename||"",n=[],o=()=>{var i;a||(a=!0,(i=n.shift())==null||i())},a=!1;return{name:"anya",visitor:{Program(i){let l=Fe(i),c=[],p={};if(t.rsc&&!be(i))return;let f=Ee(i,t);if(c.push(Ie(f,r)),i.traverse({CallExpression(m){t.extra&&ee(f,m,p)},ArrowFunctionExpression(m){if(!t.isJSX)return;let x=$(f,m,i,r);x&&c.push(x)},FunctionDeclaration(m){if(t.extra&&ee(f,m,p),!t.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let x=$(f,m,i,r);x&&c.push(x)},FunctionExpression(m){if(!t.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let x=$(f,m,i,r);x&&c.push(x)},VariableDeclarator(m){t.extra&&ee(f,m,p)},ClassDeclaration(m){if(t.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}$(f,m,i,r)}},ClassExpression(m){if(t.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}$(f,m,i,r)}},MemberExpression(m){t.isJSX&&he(f,m)},ExportAllDeclaration(m){t.isJSX&&z(f,m)},ExportDefaultDeclaration(m){t.isJSX&&z(f,m)},ExportNamedDeclaration(m){t.isJSX&&z(f,m)},ExportNamespaceSpecifier(m){t.isJSX&&z(f,m)}}),!!c.length){if(t.isJSX){let m=Re(f,i,r,c);i.node.body.push(m)}Ue(r,p),n.push(async()=>{await Ze(t.source,r,l),a=!1,o()}),o()}}}}};var pt=te;var mt=d((e,t,r)=>{let n=new Set(r),o=-1,a=-1,i;for(let l=0,c=e.length;l<c;l+=1){let p=e[l];n.has(p.name)&&o===-1&&(o=l),p.name===t&&(a=l,i=p)}o!==-1&&a!==-1&&o<a&&(e.splice(a,1),e.splice(o,0,i))},"repushPlugin:plugin.ts"),ge=d(e=>e.replace(process.cwd(),""),"getRelativePath:plugin.ts");var H=require("kleur/colors");var ut=!1,ft=()=>{if(ut)return;let e=performance.now();ut=!0,console.log(`
 ${(0,H.bold)((0,H.magenta)("\u26A1 Million Lint v0.0.66"))}`),console.log(` ${(0,H.green)("\u2713")} Ready in ${(performance.now()-e).toFixed(2)}ms`)},dt=e=>(console.log(` ${(0,H.gray)("\u25CB")} Compiling ${ge(e)} ...`),performance.now()),gt=(e,t,r)=>{if(t===null)return 0;let n=performance.now()-t;return console.log(` ${(0,H.green)("\u2713")} Compiled ${ge(e)} in ${n.toFixed(2)}ms (total: ${r.toFixed(2)}ms)`),n};var ar="**/*.{jsx,tsx,ts,js,mjs,cjs}",lr="**/node_modules/**/*",St=!1,ye=()=>St,cr=process.env.NODE_ENV==="production",P=(0,xt.createUnplugin)((e={},t)=>{var a,i;if(cr)return{name:"anya"};ft();let r=(0,yt.createFilter)(((a=e.filter)==null?void 0:a.include)||ar,((i=e.filter)==null?void 0:i.exclude)||[lr,"**/_app.{jsx,tsx,js,ts}","**/_document.{jsx,tsx,js,ts}"]),n=null,o=0;return St=e.dev||!1,e.framework??(e.framework=t.framework),{enforce:"pre",name:"anya",watchChange(l){o=0,ce(l)},transformInclude(l){let c=r(l);return c&&e.dev&&(n=dt(l)),c},async transform(l,c){var p;try{let f=!0;if((c.endsWith(".ts")||c.endsWith(".mjs")||c.endsWith(".cjs"))&&(f=!1),c.endsWith(".js")&&!/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/.test(l)&&(f=!1),e.extra===!1&&!f)return null;let m=["jsx",["importAttributes",{deprecatedAssertSyntax:!1}],"throwExpressions","decorators","destructuringPrivate","explicitResourceManagement"];if(/\.[mc]?tsx?$/i.test(c)&&m.push("typescript"),(p=e.plugins)!=null&&p.length)for(let D=0,T=e.plugins.length;D<T;D++){let J=e.plugins[D];typeof J=="string"&&m.push(J)}let x=await(0,bt.transformAsync)(l,{plugins:[[pt,{...e,source:l,isJSX:f,filename:c,extra:!0}]],parserOpts:{plugins:m},filename:c,ast:!1,sourceFileName:c,sourceMaps:!0,configFile:!1,babelrc:!1});if(e.dev&&(o+=gt(c,n,o)),x)return{code:x.code||"",map:x.map}}catch{}return null},vite:{handleHotUpdate(l){o=0,ce(l.file)},configResolved(l){mt(l.plugins,"anya",["astro:jsx","vite:react-babel","vite:react-jsx","vite:preact-jsx","vite:react-swc"])}}}});var pr=P.vite,Et=pr;var mr=P.rspack,ht=mr;var ur=P.rollup,Tt=ur;var fr=P.rspack,Pt=fr;var dr=P.esbuild,Nt=dr;var vt=(e={})=>(t={})=>Array.isArray(t)?(t.push(vt(e)),t):{...t,webpack:(r,n)=>n.isServer||!n.dev?r:(r.plugins.unshift(P.webpack({framework:"next",...e})),typeof t.webpack=="function"?t.webpack(r,n):r)},It=vt;var wt=Pt,Ct=Nt,Mt=Tt,Dt=ht,kt=Et,Rt=It,At=P,Ft=te,gr={vite:kt,webpack:Dt,rollup:Mt,rspack:wt,esbuild:Ct,next:Rt,unplugin:At,babel:Ft};0&&(module.exports={babel,esbuild,next,rollup,rspack,unplugin,vite,webpack});
