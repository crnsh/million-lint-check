var K=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});import{createUnplugin as Kt}from"unplugin";import{createFilter as Wt}from"@rollup/pluginutils";import{transformAsync as qt}from"@babel/core";import*as C from"@babel/types";import{gray as xt,red as yt,yellow as bt}from"kleur/colors";var d=(e,t)=>(...r)=>{if(me()!=="debug")return e(...r);let o=performance.now(),a=e(...r),i=performance.now(),l=Number((i-o).toFixed(4));return l<.025||(l>.1?l=yt(l):l>.05&&(l=bt(l)),console.log(`   - ${l}ms ${xt(`| ${t}`)}`)),a};var ue=d(e=>{let t=e.node.directives;if(!t)return!1;let r=!1;for(let n=0,o=t.length;n<o;n++)if(t[n].value.value==="use client"){r=!0;break}return r},"hasUseClientDirective:check.ts"),Y=new Map,ee=d(e=>{var r;if(!e)return!1;if(Y.has(e))return Y.get(e);let t=!1;for(let n=0,o=((r=e.node.leadingComments)==null?void 0:r.length)||0;n<o;n++)if(e.node.leadingComments[n].value.includes("million ignore")){t=!0;break}return Y.set(e,t),t?!0:ee(e.parentPath)},"shouldIgnore:check.ts");import{addNamed as de}from"@babel/helper-module-imports";import*as F from"@babel/types";import*as s from"@babel/types";var te=d(e=>s.isTSParameterProperty(e)||s.isTSDeclareFunction(e)||s.isTSDeclareMethod(e)||s.isTSQualifiedName(e)||s.isTSCallSignatureDeclaration(e)||s.isTSConstructSignatureDeclaration(e)||s.isTSPropertySignature(e)||s.isTSMethodSignature(e)||s.isTSIndexSignature(e)||s.isTSAnyKeyword(e)||s.isTSBooleanKeyword(e)||s.isTSBigIntKeyword(e)||s.isTSIntrinsicKeyword(e)||s.isTSNeverKeyword(e)||s.isTSNullKeyword(e)||s.isTSNumberKeyword(e)||s.isTSObjectKeyword(e)||s.isTSStringKeyword(e)||s.isTSSymbolKeyword(e)||s.isTSUndefinedKeyword(e)||s.isTSUnknownKeyword(e)||s.isTSVoidKeyword(e)||s.isTSThisType(e)||s.isTSFunctionType(e)||s.isTSConstructorType(e)||s.isTSTypeReference(e)||s.isTSTypePredicate(e)||s.isTSTypeQuery(e)||s.isTSTypeLiteral(e)||s.isTSArrayType(e)||s.isTSTupleType(e)||s.isTSOptionalType(e)||s.isTSRestType(e)||s.isTSNamedTupleMember(e)||s.isTSUnionType(e)||s.isTSIntersectionType(e)||s.isTSConditionalType(e)||s.isTSInferType(e)||s.isTSParenthesizedType(e)||s.isTSTypeOperator(e)||s.isTSIndexedAccessType(e)||s.isTSMappedType(e)||s.isTSLiteralType(e)||s.isTSExpressionWithTypeArguments(e)||s.isTSInterfaceDeclaration(e)||s.isTSInterfaceBody(e)||s.isTSTypeAliasDeclaration(e)||s.isTSInstantiationExpression(e)||s.isTSAsExpression(e)||s.isTSSatisfiesExpression(e)||s.isTSTypeAssertion(e)||s.isTSEnumDeclaration(e)||s.isTSEnumMember(e)||s.isTSModuleDeclaration(e)||s.isTSModuleBlock(e)||s.isTSImportType(e)||s.isTSImportEqualsDeclaration(e)||s.isTSExternalModuleReference(e)||s.isTSNonNullExpression(e)||s.isTSExportAssignment(e)||s.isTSNamespaceExportDeclaration(e)||s.isTSTypeAnnotation(e)||s.isTSTypeParameterInstantiation(e)||s.isTSTypeParameterDeclaration(e)||s.isTSTypeParameter(e),"isTypeScript:mod.ts");import*as R from"@babel/types";var St=/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/,O=d(e=>{if(St.test(e.getSource()))return!0;let t=!1;return e.traverse({JSXElement(r){t=!0,r.stop()},JSXFragment(r){t=!0,r.stop()}}),t},"hasJSX:jsx.ts"),A=d(e=>!e.length||!/[a-zA-Z]/.test(e[0])?!1:e[0]===e[0].toUpperCase(),"isCapitalized:jsx.ts"),fe=d(e=>R.isJSXIdentifier(e)?R.identifier(e.name):R.isJSXMemberExpression(e)?R.memberExpression(fe(e.object),fe(e.property)):R.identifier(e.name.name),"convertJSXToAST:jsx.ts");var _=d(e=>Array.isArray(e)?e[0]:e,"resolvePath:path.ts"),wr=d(e=>{let t=!1;return e.traverse({ReturnStatement(){t=!0}}),t},"hasReturnStatement:path.ts");var ge=d((e,t)=>{let r=new Map,n={},o=(c,p)=>{let f=`${c}@${p}`;return r.has(f)||r.set(f,de(e,c,p)),r.get(f)},a=c=>{let p=`default@${c}`;return r.has(p)||r.set(p,de(e,"default",c,{nameHint:"_"})),r.get(p)},i=0;return{addNamed:o,addDefault:a,addExport:(c,p,f)=>{n[`export_${c??i++}`]={kind:"export",loc:[(p==null?void 0:p.start.line)||0,(p==null?void 0:p.start.column)||0,(p==null?void 0:p.end.line)||0,(p==null?void 0:p.end.column)||0],jsx:!!f}},importMap:r,externalsMap:n,options:t}},"createModuleFactory:mod.ts"),S=d((e,t,r)=>{let n=e.node.callee;if(F.isMemberExpression(n)){if(!F.isIdentifier(n.property))return!1;n=n.property}if(!F.isIdentifier(n))return!1;let o=e.scope.getBinding(n.name);if(!o||!o.path.isImportSpecifier()||!F.isIdentifier(o.path.node.imported))return!1;let a=t.indexOf(o.path.node.imported.name);return a===-1||!o.path.parentPath.isImportDeclaration()||o.path.parentPath.node.source.value!==r?!1:t[a]},"isImportFrom:mod.ts"),$=d((e,t)=>{var n;if((n=t==null?void 0:t.node)!=null&&n.loc||te(t.node))return;let r=null;t.traverse({MemberExpression(o){F.isIdentifier(o.node.property)&&(r=o.node.property.name)},Identifier(o){r=o.node.name,o.stop()}}),e.addExport(r,t.node.loc,O(_(t.get("declaration"))))},"createESMExport:mod.ts"),xe=d((e,t)=>{var n;if((n=t==null?void 0:t.node)!=null&&n.loc||te(t.node)||!F.isIdentifier(t.node.property)||!F.isIdentifier(t.node.object)||t.node.object.name!=="module"||t.node.property.name!=="exports")return;let r=t.find(o=>o.isAssignmentExpression());r&&e.addExport(null,r.node.loc,O(_(r.get("right"))))},"createCJSExport:mod.ts"),re=new Map,ye=d((e,t)=>{let n=t.path.component.scope.getAllBindings();for(let o in n){let a=n[o];if(a&&o===t.name||a.scope.uid===t.path.real.scope.uid)continue;if(re.has(`${o}::${a.scope.uid}`)){e.externalsMap[o]=re.get(`${o}::${a.scope.uid}`);continue}let i=a.kind,l=a.path.node.loc;o==="arguments"||i==="param"||(e.externalsMap[o]={kind:i,loc:[(l==null?void 0:l.start.line)||0,(l==null?void 0:l.start.column)||0,(l==null?void 0:l.end.line)||0,(l==null?void 0:l.end.column)||0],jsx:O(a.path)},re.set(`${o}::${a.scope.uid}`,e.externalsMap[o]))}return e.externalsMap},"getExternals:mod.ts");import*as q from"@babel/types";var W=e=>q.isJSXNamespacedName(e)?`${e.namespace.name}:${e.name.name}`:q.isJSXMemberExpression(e)?`${W(e.object)}.${W(e.property)}`:e.name;import*as E from"@babel/types";var V=new Map,I=(e,t)=>{let r=`${e}::${t}`;return be(r)},be=d((e,t=0)=>{if(V.has(e))return V.get(e);let r=3735928559^t,n=1103547991^t;for(let a=0,i;a<e.length;a++)i=e.charCodeAt(a),r=Math.imul(r^i,2654435761),n=Math.imul(n^i,1597334677);r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909);let o=4294967296*(2097151&n)+(r>>>0);if(V.has(e)){if(V.get(e)!==o)return be(e,t+1)}else V.set(e,o);return o},"hash:hash.ts");import*as w from"@babel/types";var Et=w.arrayExpression([w.numericLiteral(0),w.numericLiteral(0),w.numericLiteral(0),w.numericLiteral(0)]),h=d(e=>{if(!e)return Et;let{start:t,end:r}=e;return w.arrayExpression([w.numericLiteral(t.line),w.numericLiteral(t.column),w.numericLiteral(r.line),w.numericLiteral(r.column)])},"getSourceLocation:loc.ts");import*as L from"@babel/types";var Se=d(e=>{let t=null;if(e.isArrowFunctionExpression()||e.isFunctionExpression()){L.isBlockStatement(e.node.body)||(e.node.body=L.blockStatement([L.returnStatement(e.node.body)]));let l=!1,c=e.find(p=>(p.isObjectProperty()&&(l=!0),p.isVariableDeclarator()));if(!c||l)return null;t=c}else e.isFunctionDeclaration()&&(t=e);if(!t)return null;let r=null,n=null;if(e.isClassDeclaration()){let l=t.get("body.body").find(p=>p.isClassMethod({kind:"constructor"}));if(!l)return null;e=l;let c=l.node.params;for(let p=0,f=c.length;p<f;p++){let m=c[p];if(L.isIdentifier(m,{name:"props"})){r=m,n=y=>{c[p]=y};break}}}else if(e.isFunctionDeclaration()||e.isFunctionExpression()||e.isArrowFunctionExpression()){let l=e.node.params;r=l[0]||null,n=c=>{l[0]=c}}let o=t.node.id;if(!(L.isIdentifier(o)&&A(o.name)&&O(e)))return null;let i={name:String(o.name),props:r,setProps:n,path:{real:e,component:t},type:{real:e.type,component:t.type}};return e._hir=i,i},"createHir:hir.ts"),oe=new Map,J=d(e=>{if(oe.has(e))return oe.get(e);let t=null;return e.find(r=>(t=r._hir,!!t)),t&&oe.set(e,t),t},"getHir:hir.ts");var G=d((e,t,r,n,o,a,i)=>{let l=J(r);if(!l)return;let c=e.addNamed(t,"@million/lint/runtime"),p=E.addComment(E.callExpression(c,[E.numericLiteral(I(n,l.name)),r.node,h(a??r.node.loc),E.numericLiteral(o),i?E.objectExpression([E.objectProperty(E.identifier("name"),E.stringLiteral(i.name)),E.objectProperty(E.identifier("loc"),h(i.loc))]):E.nullLiteral()]),"leading","million ignore"),[f]=r.replaceWith(p);f.skip(),r.skip()},"captureGeneric:generic.ts");import*as N from"@babel/types";var Ee=d((e,t,r,n)=>{var p;let o=t.path.component.scope.generateUidIdentifier("props"),a=t.props,i=e.addNamed("captureProps","@million/lint/runtime"),l=N.addComment(N.callExpression(i,[N.numericLiteral(I(r,t.name)),o,h(a.loc),N.numericLiteral(n)]),"leading","million ignore");t.path.real.node.body.body.unshift(N.variableDeclaration("let",[N.variableDeclarator(a,o)]),N.expressionStatement(l)),(p=t.setProps)==null||p.call(t,o)},"captureProps:props.ts");import*as b from"@babel/types";var he=d((e,t)=>{let r=e.addNamed("registerFile","@million/lint/runtime");return b.callExpression(r,[b.stringLiteral(t),b.stringLiteral(process.cwd()),e.addDefault("react"),b.stringLiteral(e.options.framework||"")])},"registerFile:register.ts"),ht=b.memberExpression(b.identifier("JSON"),b.identifier("parse")),Te=d((e,t,r,n)=>{let o=ye(e,t),a=JSON.stringify(o),i=e.addNamed("registerComponent","@million/lint/runtime");return b.callExpression(i,[b.stringLiteral(r),b.stringLiteral(t.name),b.numericLiteral(I(r,t.name)),b.identifier(t.name),b.callExpression(ht,[b.stringLiteral(a)]),h(t.path.real.isArrowFunctionExpression()?t.path.component.parentPath.node.loc:t.path.component.node.loc),b.numericLiteral(n)])},"registerComponent:register.ts"),po=d((e,t,r,n)=>{let o=e.addNamed("registerStateManager","@million/lint/runtime");return b.callExpression(o,[b.stringLiteral(t),b.stringLiteral(r),b.arrayExpression(n.map(i=>b.objectExpression([b.objectProperty(b.identifier("type"),b.stringLiteral(i.type)),b.objectProperty(b.identifier("loc"),h(i.loc))])))])},"registerStateManager:register.ts");import*as M from"@babel/types";var ne=d((e,t,r,n)=>{let o=J(t);if(!o)return;let a=M.cloneNode(t.node),i=t.find(f=>f.isJSXExpressionContainer()),l=e.addNamed("captureJSX","@million/lint/runtime"),c=M.addComment(M.callExpression(l,[M.numericLiteral(I(r,o.name)),a,h(t.node.loc),h((i==null?void 0:i.node.loc)??t.node.loc),M.numericLiteral(n)]),"leading","million ignore"),[p]=t.replaceWith(t.parentPath.isJSXElement()||t.parentPath.isJSXFragment()?M.jsxExpressionContainer(c):c);p.skip()},"captureJSX:jsx.ts");import*as j from"@babel/types";var Pe=d((e,t,r)=>{let n=e.addNamed("useMount","@million/lint/runtime"),o=j.addComment(j.callExpression(n,[j.stringLiteral(r),j.stringLiteral(t.name)]),"leading","million ignore");t.path.real.node.body.body.unshift(j.expressionStatement(o))},"captureMount:mount.ts");import*as U from"@babel/types";var Ne=d((e,t,r,n,o,a)=>{let i=J(r);if(!i)return;let l=e.addNamed(t,"@million/lint/runtime"),c=[];if(r.isArrayExpression()){let m=r.node.elements;for(let y=0,D=m.length;y<D;y++){let T=m[y];c.push(T==null?void 0:T.loc)}}let p=U.addComment(U.callExpression(l,[U.numericLiteral(I(n,i.name)),r.node,h(a??r.node.loc),U.arrayExpression(c.map(m=>h(m))),U.numericLiteral(o)]),"leading","million ignore"),[f]=r.replaceWith(p);f.skip(),r.skip()},"captureDeps:generic.ts");import*as v from"@babel/types";var ve=d((e,t,r,n)=>{let o=J(t);if(!o)return;let a=e.addNamed("captureHTTP","@million/lint/runtime"),i=[];v.traverseFast(t.node,p=>{v.isStringLiteral(p)&&p.value.includes("/")&&i.push(p)});let l=v.addComment(v.callExpression(a,[v.numericLiteral(I(r,o.name)),t.node,h(t.node.loc),v.arrayExpression(i),v.numericLiteral(n)]),"leading","million ignore"),[c]=t.replaceWith(l);c.skip(),t.skip()},"captureHTTP:http.ts");var X=d((e,t,r,n)=>{if(t.scope.parent.uid!==r.scope.uid)return;if(t.isClass()){let c=t.node.superClass;if(!C.isMemberExpression(c))return;let p=c.object,f=c.property;if(!C.isIdentifier(p)||!C.isIdentifier(f)||p.name!=="React"||f.name!=="Component")return}let o=Se(t);if(!o)return;Pe(e,o,n);let a=0;o.props&&(C.isObjectPattern(o.props)||C.isIdentifier(o.props))&&Ee(e,o,n,a++);let i=[];t.traverse({CallExpression(c){if(ee(c))return;let p=c.node.callee;if(C.isIdentifier(p)){if(["fetch","useQuery","useSWR"].includes(p.name)){ve(e,c,n,a++);return}if(p.name.startsWith("use")){if(S(c,["useState","useReducer"],"react")||S(c,["useAtom"],"jotai")){G(e,"captureReducer",c,n,a++);return}if(S(c,["useContext"],"react")||S(c,["useSelector"],"react-redux")||S(c,["useSnapshot"],"valtio")||S(c,["useRecoilState"],"recoil")||S(c,["useAtomValue"],"jotai")){G(e,"captureFunctionCall",c,n,a++);return}if(S(c,["useEffect","useLayoutEffect","useMemo","useCallback","useInsertionEffect"],"react")&&c.node.arguments.length>1){let f=_(c.get("arguments.1"));if(!f.isExpression())return;Ne(e,"captureDeps",f,n,a++,c.node.loc);return}}}C.isMemberExpression(p)&&C.isIdentifier(p.property)&&p.property.name==="setState"&&C.isIdentifier(p.object)&&p.object.name==="this"&&G(e,"captureClassSetState",c,n,a)},JSXElement(c){let p=c.node,f=W(p.openingElement.name);if(A(f)){if(f.includes("Provider")){i.unshift(()=>{ne(e,c,n,a)});return}ne(e,c,n,a)}}});for(let c=0,p=i.length;c<p;c++)i[c]();return Te(e,o,n,a+1)},"transformComponent:index.ts");import*as u from"@babel/types";var Tt=u.memberExpression(u.memberExpression(u.identifier("import"),u.identifier("meta")),u.identifier("hot")),Pt=u.memberExpression(u.memberExpression(u.identifier("import"),u.identifier("meta")),u.identifier("webpackHot")),Ie=u.memberExpression(u.identifier("module"),u.identifier("hot")),Nt=u.binaryExpression("===",u.unaryExpression("typeof",u.identifier("module")),u.stringLiteral("undefined")),we=d((e,t,r,n)=>{let o=e.options.framework==="webpack"?Pt:Tt,a=n.length,i=new Array(a);for(let T=0;T<a;T++)i[T]=u.expressionStatement(n[T]);let l=t.scope.generateUidIdentifier("c"),c=e.addNamed("resync","@million/lint/runtime"),p=e.addNamed("reportOutliers","@million/lint/runtime"),f=u.variableDeclaration("let",[u.variableDeclarator(l,u.arrowFunctionExpression([],u.blockStatement(i)))]),m=u.arrowFunctionExpression([],u.blockStatement([u.expressionStatement(u.callExpression(l,[])),u.expressionStatement(u.callExpression(c,[])),u.expressionStatement(u.callExpression(p,[]))])),y=u.ifStatement(Ie,u.blockStatement([u.expressionStatement(u.callExpression(u.memberExpression(Ie,u.identifier("accept")),[u.stringLiteral(r),m]))])),D=e.options.legacyHmr?y:u.ifStatement(Nt,u.blockStatement([u.ifStatement(o,u.blockStatement([u.expressionStatement(u.callExpression(u.memberExpression(o,u.identifier("accept")),[u.stringLiteral(r),m]))]))]),y);return vt([f,D,u.expressionStatement(u.callExpression(l,[]))])},"wrapHMR:hmr.ts"),vt=d(e=>u.expressionStatement(u.callExpression(u.arrowFunctionExpression([],u.blockStatement(e)),[])),"wrapIIFE:hmr.ts");import*as Ce from"@babel/types";var Me=d(e=>{let t=e.node.body,r=[];for(let n=0,o=t.length;n<o;n++){let a=t[n];if(!Ce.isImportDeclaration(a))continue;let i=a.specifiers,l=a.source.value;if(!i.length)continue;let c=a.loc,p={specifiers:[],source:l,start:a.start,end:a.end,loc:[c.start.line,c.start.column,c.end.line,c.end.column]};r.push(p);for(let f=0,m=i.length;f<m;f++){let y=i[f];p.specifiers.push(y.local.name)}}return r},"getImports:debug");import"isomorphic-fetch";var De=process.cwd(),ie=d(async e=>{try{let t=await Fe();for(let r=0,n=t.length;r<n;r++){let{port:o,cwd:a}=t[r];!e.includes(a)&&!De.includes(a)||fetch(`http://localhost:${o}/reset`).catch(()=>null)}}catch{}},"reset:http.ts"),ke=d(async(e,t)=>{let r=[];for(let i in t){let l=t[i];for(let c=0,p=l.length;c<p;c++)r.push(l[c])}r.sort((i,l)=>l.size-i.size);let n=[];for(let i=0,l=r.length;i<l;i++){if(i<l*.25){n.push(r[i]);continue}break}let o={};for(let i=0,l=n.length;i<l;i++){let c=n[i];o[c.filename]||(o[c.filename]=[]),o[c.filename].push(c)}let a={};for(let i in t){let l=t[i];for(let c=0,p=l.length;c<p;c++)a[i]=l}try{await Ae(e,{bundle:{all:a,outliers:o}})}catch{}},"reportBundle:http.ts"),Re=d(async(e,t)=>{try{await Ae(e,{stateManagers:t})}catch{}},"reportStateManagers:http.ts"),Ae=d(async(e,t)=>{try{let r=await Fe();for(let n=0,o=r.length;n<o;n++){let{port:a,cwd:i}=r[n];!e.includes(i)&&!De.includes(i)||fetch(`http://localhost:${a}/ingest?t=${Object.keys(t).join(",")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(()=>null)}}catch{}},"report:http.ts"),Fe=d(async()=>(await fetch(`http://localhost:${52921}`)).json(),"getSync:http.ts");import{promises as kt}from"fs";import{builtinModules as Rt}from"module";import ae from"path";import{promisify as At}from"util";import Ft from"zlib";import*as Oe from"esbuild";import{promises as wt}from"fs";import{createRequire as Ct}from"module";import Le from"path";import je from"escalade";var z="package.json",se=async e=>await je(e,(r,n)=>n.includes(z)?z:void 0)??void 0,Mt=async e=>{let t=await wt.readFile(e,"utf-8");return JSON.parse(t)},Dt=(e,t,r)=>je(e,async(n,o)=>{if(!o.includes(z))return;let a=Le.join(n,z),i=await Mt(a);return r==null||r(a,i),i.name===t?z:void 0}),Ue=async(e,t)=>{let n=Ct(Le.resolve(t,"<import>.js")).resolve(e),o=e.startsWith("@"),[a,i]=o?e.split("/"):[e.split("/")[0],""],l=a+(o?"/":"")+i,c,p;try{p=`${l}/package.json`,c=K(p)}catch{}let f,m;if(n!==l){let y=[];await Dt(n,l,(T,H)=>{y.push([T,H])})&&y.length>0&&([p,c]=y[y.length-1],y.length>1&&([m,f]=y[0]))}return{rootPackageFile:p,rootPackage:c,modulePackageFile:m,modulePackage:f}};var Lt=At(Ft.gzip),jt=e=>Lt(e).then(t=>t.length),He=async e=>!!await kt.stat(e).catch(()=>null);var Ut=e=>[e&&`export {${Object.values({...e}).join(", ")}}`].filter(Boolean).join(`
`),le=RegExp(`^node:|^(${Rt.join("|")})(/|$)`),Ht={name:"external",setup(e){e.onResolve({filter:le,namespace:"file"},t=>({path:t.path,external:!0}))}},Jt=/^[a-z@]/,Ot={name:"external",setup(e){let t=new Map,r=new Map;e.onResolve({filter:Jt,namespace:"file"},async n=>{if(le.test(n.path))return null;let o,a=n.resolveDir;if(t.has(a))o=await t.get(a);else{let i=se(a).then(l=>l?K(l):null);t.set(a,i),o=await i}if(o!=null&&o.peerDependencies&&n.path in o.peerDependencies){let i=r.get(o.name);return i||(i=new Set,r.set(o.name,i)),i.add(n.path),{path:n.path,external:!0}}return null})}},Je=new Map,Xt=(e,t)=>`${e.name}:${e.version}:${t}`,_t=async(e,t,{filename:r,baseDir:n,projectPackageFile:o,cache:a=!1})=>{let i=t.source,[l]=i.split("/");if(le.test(l))throw new Error("Skip builtin modules");let c=`${e}
${Ut(t.specifiers)}`,{rootPackage:p}=await Ue(i,n).catch(()=>({})),f=a&&p!==void 0&&Xt(p,c);if(a&&f){let k=Je.get(f);if(k)return k}let m=p?Object.keys({...p.peerDependencies}):[],y=o?ae.dirname(o):n,D=await Oe.build({stdin:{loader:"ts",contents:c,resolveDir:ae.dirname(r),sourcefile:"<import>"},outfile:"<bundle>.js",absWorkingDir:y,plugins:[Ht,Ot],resolveExtensions:[".jsx",".js",".tsx",".ts",".css",".json"],loader:{".node":"binary",".jpeg":"empty",".jpg":"empty",".png":"empty",".webp":"empty",".gif":"empty",".svg":"empty"},external:m,target:"esnext",format:"esm",platform:"browser",metafile:!1,minify:!0,bundle:!0,write:!1,logLimit:0,logLevel:"silent"}),T=await Promise.all(D.outputFiles.map(async k=>{let B=k.contents.length;return[B,B===0?0:await jt(Buffer.from(k.contents))]})),H=0;for(let k=0,B=T.length;k<B;k++)H+=T[k][1];return a&&f&&Je.set(f,H),H};async function*Xe(e,t,r){let n=process.cwd(),o=t&&await He(t)?ae.dirname(t):n&&await He(n)?n:null;if(!o)return null;let a=await se(o),i={filename:t,baseDir:o,projectPackageFile:a,cache:!0};for(let l=0,c=r.length;l<c;l++){let p=r[l],f=e.substring(p.start,p.end);try{let m=await _t(f,p,i);m&&(yield m)}catch{}}}var $t=async(e,t,r)=>{let n=[],o=0;for await(let a of Xe(e,t,r)){let i=r[o];n.push({size:a,filename:t,loc:i.loc}),o++}return n},_e={},$e=async(e,t,r)=>{try{let n=await $t(e,t,r);return _e[t]=n,await ke(t,_e),n}catch{}return[]};import*as Ve from"@babel/types";var ze=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!Ve.isIdentifier(n))return null;let o=S(t,["atom"],"jotai");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};import*as Be from"@babel/types";var Ke=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!Be.isIdentifier(n))return null;let o=S(t,["atom","selector"],"recoil");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};import*as ce from"@babel/types";var We=(e,t)=>{let r=e.options.filename;if(t.isCallExpression()){let n=t.node.callee;if(!ce.isIdentifier(n))return null;let o=S(t,["configureStore","createSlice","createReducer"],"@reduxjs/toolkit");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}}if(t.isFunctionDeclaration()||t.isVariableDeclarator()){let n=t.node.id;if(!ce.isIdentifier(n))return null;if(n.name.toLowerCase().includes("reducer")){let o=t.node.loc;return{filename:r,type:"reducer",loc:[o.start.line,o.start.column,o.end.line,o.end.column]}}}return null};import*as qe from"@babel/types";var Ge=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!qe.isIdentifier(n))return null;let o=S(t,["proxy"],"valtio");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};import*as Qe from"@babel/types";var Ze=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!Qe.isIdentifier(n))return null;let o=S(t,["create"],"zustand");if(!o)return null;let a=t.find(l=>l.isVariableDeclarator());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};import*as Ye from"@babel/types";var et=(e,t)=>{let r=e.options.filename,n=t.node.callee;if(!Ye.isIdentifier(n))return null;let o=S(t,["makeAutoObservable"],"mobx-react-lite");if(!o)return null;let a=t.find(l=>l.isClassDeclaration());if(!a)return null;let i=a.node.loc;return{filename:r,type:o,loc:[i.start.line,i.start.column,i.end.line,i.end.column]}};var Q=(e,t,r)=>{let{source:n}=e.options;if(n){if(n.includes("jotai")&&t.isCallExpression()){let o=ze(e,t);o&&(r.jotai??(r.jotai=[]),r.jotai.push(o))}if(n.includes("recoil")&&t.isCallExpression()){let o=Ke(e,t);o&&(r.recoil??(r.recoil=[]),r.recoil.push(o))}if(n.includes("valtio")&&t.isCallExpression()){r.valtio??(r.valtio=[]);let o=Ge(e,t);o&&(r.valtio??(r.valtio=[]),r.valtio.push(o))}if(n.includes("zustand")&&t.isCallExpression()){let o=Ze(e,t);o&&(r.zustand??(r.zustand=[]),r.zustand.push(o))}if(n.includes("redux")&&(t.isCallExpression()||t.isVariableDeclarator()||t.isFunctionDeclaration())){r.redux??(r.redux=[]);let o=We(e,t);o&&(r.redux??(r.redux=[]),r.redux.push(o))}if(n.includes("mobx")&&t.isCallExpression()){let o=et(e,t);o&&(r.mobx??(r.mobx=[]),r.mobx.push(o))}}};var Z=(e,t={})=>{let r=t.filename||"",n=[],o=()=>{var i;a||(a=!0,(i=n.shift())==null||i())},a=!1;return{name:"anya",visitor:{Program(i){let l=Me(i),c=[],p={};if(t.rsc&&!ue(i))return;let f=ge(i,t);if(c.push(he(f,r)),i.traverse({CallExpression(m){t.extra&&Q(f,m,p)},ArrowFunctionExpression(m){if(!t.isJSX)return;let y=X(f,m,i,r);y&&c.push(y)},FunctionDeclaration(m){if(t.extra&&Q(f,m,p),!t.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let y=X(f,m,i,r);y&&c.push(y)},FunctionExpression(m){if(!t.isJSX)return;if(m.node.id&&!A(m.node.id.name)){m.skip();return}let y=X(f,m,i,r);y&&c.push(y)},VariableDeclarator(m){t.extra&&Q(f,m,p)},ClassDeclaration(m){if(t.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}X(f,m,i,r)}},ClassExpression(m){if(t.isJSX){if(m.node.id&&!A(m.node.id.name)){m.skip();return}X(f,m,i,r)}},MemberExpression(m){t.isJSX&&xe(f,m)},ExportAllDeclaration(m){t.isJSX&&$(f,m)},ExportDefaultDeclaration(m){t.isJSX&&$(f,m)},ExportNamedDeclaration(m){t.isJSX&&$(f,m)},ExportNamespaceSpecifier(m){t.isJSX&&$(f,m)}}),!!c.length){if(t.isJSX){let m=we(f,i,r,c);i.node.body.push(m)}Re(r,p),n.push(async()=>{await $e(t.source,r,l),a=!1,o()}),o()}}}}};var tt=Z;var rt=d((e,t,r)=>{let n=new Set(r),o=-1,a=-1,i;for(let l=0,c=e.length;l<c;l+=1){let p=e[l];n.has(p.name)&&o===-1&&(o=l),p.name===t&&(a=l,i=p)}o!==-1&&a!==-1&&o<a&&(e.splice(a,1),e.splice(o,0,i))},"repushPlugin:plugin.ts"),pe=d(e=>e.replace(process.cwd(),""),"getRelativePath:plugin.ts");import{bold as Vt,gray as zt,green as nt,magenta as Bt}from"kleur/colors";var ot=!1,it=()=>{if(ot)return;let e=performance.now();ot=!0,console.log(`
 ${Vt(Bt("\u26A1 Million Lint v0.0.66"))}`),console.log(` ${nt("\u2713")} Ready in ${(performance.now()-e).toFixed(2)}ms`)},st=e=>(console.log(` ${zt("\u25CB")} Compiling ${pe(e)} ...`),performance.now()),at=(e,t,r)=>{if(t===null)return 0;let n=performance.now()-t;return console.log(` ${nt("\u2713")} Compiled ${pe(e)} in ${n.toFixed(2)}ms (total: ${r.toFixed(2)}ms)`),n};var Gt="**/*.{jsx,tsx,ts,js,mjs,cjs}",Qt="**/node_modules/**/*",lt=!1,me=()=>lt,Zt=process.env.NODE_ENV==="production",P=Kt((e={},t)=>{var a,i;if(Zt)return{name:"anya"};it();let r=Wt(((a=e.filter)==null?void 0:a.include)||Gt,((i=e.filter)==null?void 0:i.exclude)||[Qt,"**/_app.{jsx,tsx,js,ts}","**/_document.{jsx,tsx,js,ts}"]),n=null,o=0;return lt=e.dev||!1,e.framework??(e.framework=t.framework),{enforce:"pre",name:"anya",watchChange(l){o=0,ie(l)},transformInclude(l){let c=r(l);return c&&e.dev&&(n=st(l)),c},async transform(l,c){var p;try{let f=!0;if((c.endsWith(".ts")||c.endsWith(".mjs")||c.endsWith(".cjs"))&&(f=!1),c.endsWith(".js")&&!/<(?<temp1>"[^"]*"|'[^']*'|[^'">])*>/.test(l)&&(f=!1),e.extra===!1&&!f)return null;let m=["jsx",["importAttributes",{deprecatedAssertSyntax:!1}],"throwExpressions","decorators","destructuringPrivate","explicitResourceManagement"];if(/\.[mc]?tsx?$/i.test(c)&&m.push("typescript"),(p=e.plugins)!=null&&p.length)for(let D=0,T=e.plugins.length;D<T;D++){let H=e.plugins[D];typeof H=="string"&&m.push(H)}let y=await qt(l,{plugins:[[tt,{...e,source:l,isJSX:f,filename:c,extra:!0}]],parserOpts:{plugins:m},filename:c,ast:!1,sourceFileName:c,sourceMaps:!0,configFile:!1,babelrc:!1});if(e.dev&&(o+=at(c,n,o)),y)return{code:y.code||"",map:y.map}}catch{}return null},vite:{handleHotUpdate(l){o=0,ie(l.file)},configResolved(l){rt(l.plugins,"anya",["astro:jsx","vite:react-babel","vite:react-jsx","vite:preact-jsx","vite:react-swc"])}}}});var Yt=P.vite,ct=Yt;var er=P.rspack,pt=er;var tr=P.rollup,mt=tr;var rr=P.rspack,ut=rr;var or=P.esbuild,ft=or;var dt=(e={})=>(t={})=>Array.isArray(t)?(t.push(dt(e)),t):{...t,webpack:(r,n)=>n.isServer||!n.dev?r:(r.plugins.unshift(P.webpack({framework:"next",...e})),typeof t.webpack=="function"?t.webpack(r,n):r)},gt=dt;var nr=ut,ir=ft,sr=mt,ar=pt,lr=ct,cr=gt,pr=P,mr=Z,ss={vite:lr,webpack:ar,rollup:sr,rspack:nr,esbuild:ir,next:cr,unplugin:pr,babel:mr};export{mr as babel,ss as default,ir as esbuild,cr as next,sr as rollup,nr as rspack,pr as unplugin,lr as vite,ar as webpack};
